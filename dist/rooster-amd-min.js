/*
    VERSION: 7.1.2

    RoosterJS
    Copyright (c) Microsoft Corporation
    All rights reserved.

    MIT License

    Copyright (c) Microsoft Corporation. All rights reserved.

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE

*/
define(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=69)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(19);t.NodeBlockElement=i.default;var r=n(7);t.getBlockElementAtNode=r.default;var o=n(32);t.getFirstLastBlockElement=o.default;var s=n(30);t.StartEndBlockElement=s.default;var a=n(33);t.ContentTraverser=a.default;var u=n(75);t.PositionContentSearcher=u.default;var l=n(10);t.getInlineElementAtNode=l.default;var c=n(35);t.ImageInlineElement=c.default;var f=n(36);t.LinkInlineElement=f.default;var d=n(16);t.NodeInlineElement=d.default;var p=n(18);t.PartialInlineElement=p.default;var h=n(22);t.applyTextStyle=h.default;var v=n(39);t.Browser=v.default,t.getBrowserInfo=v.getBrowserInfo;var g=n(76);t.applyFormat=g.default;var m=n(40);t.changeElementTag=m.default;var y=n(20);t.collapseNodes=y.default;var E=n(1);t.contains=E.default;var b=n(77);t.extractClipboardEvent=b.default;var S=n(17);t.findClosestElementAncestor=S.default;var C=n(31);t.fromHtml=C.default;var w=n(24);t.getComputedStyles=w.default,t.getComputedStyle=w.getComputedStyle;var O=n(2);t.getTagOfNode=O.default;var N=n(21);t.isBlockElement=N.default;var P=n(41);t.isNodeEmpty=P.default;var T=n(25);t.isVoidHtmlElement=T.default;var x=n(78);t.matchLink=x.default;var L=n(79);t.adjustNodeInsertPosition=L.default;var A=n(80);t.queryElements=A.default;var I=n(14);t.splitParentNode=I.default,t.splitBalancedNodeRange=I.splitBalancedNodeRange;var D=n(43);t.unwrap=D.default;var k=n(15);t.wrap=k.default;var R=n(8);t.getNextLeafSibling=R.getNextLeafSibling,t.getPreviousLeafSibling=R.getPreviousLeafSibling;var B=n(37);t.getFirstLeafNode=B.getFirstLeafNode,t.getLastLeafNode=B.getLastLeafNode;var M=n(44);t.VTable=M.default;var U=n(4);t.Position=U.default;var z=n(11);t.createRange=z.default;var j=n(81);t.getPositionRect=j.default;var H=n(42);t.isPositionAtBeginningOf=H.default;var F=n(82);t.getSelectionPath=F.default,t.getRangeFromSelectionPath=F.getRangeFromSelectionPath},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return!(!e||!t)&&(!(!n||e!=t)||(t instanceof Node||(t=t&&t.commonAncestorContainer,n=!0),t&&3==t.nodeType&&(t=t.parentNode,n=!0),1!=e.nodeType?!!n&&e==t:!(!n&&e==t)&&e.contains(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&1==e.nodeType?e.tagName.toUpperCase():""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(90);t.Editor=i.default;var r=n(62);t.Undo=r.default;var o=n(55);t.EditPlugin=o.default;var s=n(60);t.MouseUpPlugin=s.default;var a=n(54);t.DOMEventPlugin=a.default;var u=n(61);t.TypeInContainerPlugin=u.default;var l=n(56);t.FirefoxTypeAfterLink=l.default;var c=n(27);t.cacheGetEventData=c.default;var f=n(58);t.clearEventDataCache=f.default;var d=n(57);t.cacheGetContentSearcher=d.cacheGetContentSearcher,t.clearContentSearcherCache=d.clearContentSearcherCache;var p=n(101);t.cacheGetElementAtCursor=p.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=n(9),o=function(){function e(e,t){switch(e.node?(this.node=e.node,t=e.offset):this.node=e,t){case-2:this.offset=s(this.node),this.node=this.node.parentNode,this.isAtEnd=!1;break;case-3:this.offset=s(this.node)+1,this.isAtEnd=!this.node.nextSibling,this.node=this.node.parentNode;break;case-1:this.offset=a(this.node),this.isAtEnd=!0;break;default:var n=a(this.node);this.offset=Math.max(0,Math.min(t,n)),this.isAtEnd=t>0&&t>=n}this.element=i.default(this.node)}return e.prototype.normalize=function(){if(3==this.node.nodeType||!this.node.firstChild)return this;for(var t=this.node,n=this.isAtEnd?-1:this.offset;1==t.nodeType&&t.firstChild;)t=0==n?t.firstChild:-1==n?t.lastChild:t.childNodes[n],n=this.isAtEnd?-1:0;return new e(t,n)},e.prototype.equalTo=function(e){return e&&(this==e||this.node==e.node&&this.offset==e.offset&&this.isAtEnd==e.isAtEnd)},e.prototype.isAfter=function(e){return this.node==e.node?this.isAtEnd&&!e.isAtEnd||this.offset>e.offset:r.default(this.node,e.node)},e.prototype.move=function(t){return new e(this.node,Math.max(this.offset+t,0))},e.getStart=function(t){return new e(t.startContainer,t.startOffset)},e.getEnd=function(t){return new e(t.endContainer,t.endOffset)},e}();function s(e){for(var t=0;e=e.previousSibling;)t++;return t}function a(e){return 3==e.nodeType?e.nodeValue.length:1==e.nodeType?e.childNodes.length:1}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.focus();var n=function(){return e.getDocument().execCommand(t,!1,null)},i=e.getSelectionRange();i&&i.collapsed?(e.addUndoSnapshot(),n()):e.addUndoSnapshot(n,"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(85);t.changeFontSize=i.default,t.FONT_SIZES=i.FONT_SIZES;var r=n(86);t.clearBlockFormat=r.default,t.TAGS_TO_UNWRAP=r.TAGS_TO_UNWRAP,t.TAGS_TO_STOP_UNWRAP=r.TAGS_TO_STOP_UNWRAP,t.ATTRIBUTES_TO_PRESERVE=r.ATTRIBUTES_TO_PRESERVE;var o=n(87);t.clearFormat=o.default;var s=n(88);t.createLink=s.default;var a=n(89);t.getFormatState=a.default;var u=n(102);t.insertImage=u.default;var l=n(103);t.insertTable=l.default;var c=n(104);t.editTable=c.default;var f=n(105);t.formatTable=f.default;var d=n(106);t.removeLink=d.default;var p=n(107);t.replaceWithNode=p.default;var h=n(108);t.setAlignment=h.default;var v=n(47);t.setBackgroundColor=v.default;var g=n(50);t.setTextColor=g.default;var m=n(109);t.setDirection=m.default;var y=n(48);t.setFontName=y.default;var E=n(49);t.setFontSize=E.default;var b=n(110);t.setImageAltText=b.default;var S=n(111);t.setIndentation=S.default;var C=n(51);t.toggleBold=C.default;var w=n(112);t.toggleBullet=w.default;var O=n(52);t.toggleItalic=O.default;var N=n(113);t.toggleNumbering=N.default;var P=n(114);t.toggleBlockQuote=P.default;var T=n(115);t.toggleCodeBlock=T.default;var x=n(116);t.toggleStrikethrough=x.default;var L=n(117);t.toggleSubscript=L.default;var A=n(118);t.toggleSuperscript=A.default;var I=n(53);t.toggleUnderline=I.default;var D=n(119);t.toggleHeader=D.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=n(1),o=n(2),s=n(21),a=n(19),u=n(30);function l(e,t,n){var i=e;if("BR"==o.default(i)&&n)return i;for(;i;){for(var r=e;!(r=n?e.nextSibling:e.previousSibling);)if((e=e.parentNode)==t)return i;for(;r;){if(s.default(r))return i;if("BR"==o.default(r))return n?r:i;e=r,r=n?e.firstChild:e.lastChild}i=e}return i}t.default=function(e,t){if(!r.default(e,t))return null;var n=u.default.getBlockContext(t);if(n==t)return new a.default(n);var o=l(t,n,!1),c=l(t,n,!0),f=i.default(e,o,c,!1);if(o=f[0],c=f[f.length-1],o.parentNode!=c.parentNode)return new u.default(e,o,c);for(;!o.previousSibling&&!c.nextSibling;){var d=o.parentNode;if(d==n){n!=e&&(o=c=d);break}o=c=d}return o==c&&s.default(o)?new a.default(o):new u.default(e,o,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(23);function o(e,t,n){var o=null,s=n?function(e){return e.nextSibling}:function(e){return e.previousSibling},a=n?function(e){return e.firstChild}:function(e){return e.lastChild};if(i.default(e,t))for(var u=t,l=!0;l;){var c=u.parentNode;for(u=s(u);!u&&c!=e;)u=s(c),c=c.parentNode;for(;u&&a(u);)u=a(u);if(!(l=u&&r.default(u))){o=u;break}}return o}t.getLeafSibling=o,t.getNextLeafSibling=function(e,t){return o(e,t,!0)},t.getPreviousLeafSibling=function(e,t){return o(e,t,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return!(!e||!t||4!=(4&t.compareDocumentPosition(e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n(2),o=n(35),s=n(36),a=n(16);t.default=function(e,t){var n=e instanceof Node?i.default(e,t):e;return t&&n&&function(e,t){for(var n,i=[e],u=e.parentNode;u&&t.contains(u);u=u.parentNode)i.push(u);for(var l=i.length-1;l>=0&&!n;l--){var c=i[l],f=r.default(c);"A"==f?n=new s.default(c,t):"IMG"==f&&(n=new o.default(c,t))}return n||new a.default(e,t)}(t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),r=n(4);function o(e){return 1==e.node.nodeType&&i.default(e.node)?new r.default(e.node,e.isAtEnd?-3:-2):e}t.default=function(e,t){if(!e)return null;e instanceof Node?(t=new r.default(t||e,-3),e=new r.default(e,-2)):t=t||e;var n=e.node.ownerDocument.createRange();return e=o(e),t=o(t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r="â€‹";t.default=function(e,t){e.focus();var n=e.getSelectionRange();if(n&&n.collapsed){var o=n.startContainer;"SPAN"!=i.getTagOfNode(o)||o.firstChild&&("BR"!=i.getTagOfNode(o.firstChild)||o.firstChild.nextSibling)?(o&&3==o.nodeType&&o.nodeValue==r&&"SPAN"==i.getTagOfNode(o.parentNode)||(e.addUndoSnapshot(),o=e.getDocument().createTextNode(r),n.insertNode(o)),i.applyTextStyle(o,t),e.select(o,-1)):(e.addUndoSnapshot(),t(o))}else e.addUndoSnapshot(function(){for(var n,i,r=e.getSelectionTraverser(),o=r&&r.currentInlineElement;o;){var s=r.getNextInlineElement();o.applyStyle(function(e){t(e),n=n||e,i=e}),o=s}n&&i&&e.select(n,-2,i,-3)},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(128);t.HtmlSanitizer=i.default;var r=n(66);t.htmlToDom=r.default,t.splitWithFragment=r.splitWithFragment;var o=n(65);t.getInheritableStyles=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);function r(e,t){if(!e||!e.parentNode)return null;var n=e.parentNode,i=n.cloneNode(!1);if(i.removeAttribute("id"),t)for(;n.firstChild&&n.firstChild!=e;)i.appendChild(n.firstChild);else for(;e.nextSibling;)i.appendChild(e.nextSibling);return i.firstChild&&""!=i.innerHTML?n.parentNode.insertBefore(i,t?n:n.nextSibling):i=null,i}t.default=r,t.splitBalancedNodeRange=function(e){var t=e instanceof Array?e[0]:e,n=e instanceof Array?e[e.length-1]:e,o=t&&n&&t.parentNode==n.parentNode?t.parentNode:null;if(o){if(i.default(t,n)){var s=n;n=t,t=s}r(t,!0),r(n,!1)}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(31);t.default=function(e,t){if(0==(e=e?e instanceof Node?[e]:e:[]).length||!e[0])return null;if(!(t instanceof Element)){var n=e[0].ownerDocument;t=/^\w+$/.test(t=t||"div")?n.createElement(t):i.default(t,n)[0]}var r=e[0].parentNode;r&&r.insertBefore(t,e[0]);for(var o=0,s=e;o<s.length;o++){var a=s[o];t.appendChild(a)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),r=n(9),o=n(4),s=function(){function e(e,t){this.containerNode=e,this.parentBlock=t}return e.prototype.getTextContent=function(){return 3==this.containerNode.nodeType?this.containerNode.nodeValue:this.containerNode.textContent},e.prototype.getContainerNode=function(){return this.containerNode},e.prototype.getParentBlock=function(){return this.parentBlock},e.prototype.getStartPosition=function(){return new o.default(this.containerNode,0).normalize()},e.prototype.getEndPosition=function(){return new o.default(this.containerNode,-1).normalize()},e.prototype.isTextualInlineElement=function(){return this.containerNode&&3==this.containerNode.nodeType},e.prototype.isAfter=function(e){return e&&r.default(this.containerNode,e.getContainerNode())},e.prototype.contains=function(e){var t=this.getStartPosition(),n=this.getEndPosition();return e&&e.isAfter(t)&&n.isAfter(e)},e.prototype.applyStyle=function(e){i.default(this.containerNode,e)},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.default=function(e,t,n){var r=(e=e?1==e.nodeType?e:e.parentNode:null)&&1==e.nodeType?e:null;if(r&&n)if(r.closest)r=r.closest(n);else for(;r&&r!=t&&!(r.matches||r.msMatchesSelector).call(r,n);)r=r.parentElement;return!t||i.default(t,r)?r:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),r=n(11),o=n(4),s=n(8),a=function(){function e(e,t,n){this.inlineElement=e,this.start=t,this.end=n}return e.prototype.getDecoratedInline=function(){return this.inlineElement},e.prototype.getContainerNode=function(){return this.inlineElement.getContainerNode()},e.prototype.getParentBlock=function(){return this.inlineElement.getParentBlock()},e.prototype.getTextContent=function(){return r.default(this.getStartPosition(),this.getEndPosition()).toString()},e.prototype.getStartPosition=function(){return this.start||this.inlineElement.getStartPosition()},e.prototype.getEndPosition=function(){return this.end||this.inlineElement.getEndPosition()},Object.defineProperty(e.prototype,"nextInlineElement",{get:function(){return this.end&&new e(this.inlineElement,this.end,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousInlineElement",{get:function(){return this.start&&new e(this.inlineElement,null,this.start)},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){return e&&e.isAfter(this.getStartPosition())&&this.getEndPosition().isAfter(e)},e.prototype.isTextualInlineElement=function(){return this.inlineElement&&this.inlineElement.isTextualInlineElement()},e.prototype.isAfter=function(e){var t=this.getStartPosition(),n=e&&e.getEndPosition();return n&&(t.isAfter(n)||t.equalTo(n))},e.prototype.applyStyle=function(e){var t=this.getStartPosition().normalize(),n=this.getEndPosition().normalize(),r=this.getContainerNode();if(t.isAtEnd){var a=s.getNextLeafSibling(r,t.node);t=a?new o.default(a,0):null}if(0==n.offset){var u=s.getPreviousLeafSibling(r,n.node);n=u?new o.default(u,-1):null}i.default(r,e,t,n)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(9),o=function(){function e(e){this.element=e}return e.prototype.collapseToSingleElement=function(){return this.element},e.prototype.getStartNode=function(){return this.element},e.prototype.getEndNode=function(){return this.element},e.prototype.equals=function(e){return this.element==e.getStartNode()},e.prototype.isAfter=function(e){return r.default(this.element,e.getEndNode())},e.prototype.contains=function(e){return i.default(this.element,e,!0)},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(14);function o(e,t,n,o,s){for(;t.parentNode!=e&&!i.default(t.parentNode,n);){if(o&&t.previousSibling||!o&&t.nextSibling){if(!s)break;r.default(t,o)}t=t.parentNode}return t}t.default=function(e,t,n,r){if(!i.default(e,t)||!i.default(e,n))return[];if(t=o(e,t,n,!0,r),n=o(e,n,t,!1,r),i.default(t,n,!0))return[t];if(i.default(n,t))return[n];if(t.parentNode==n.parentNode){var s=[].slice.call(t.parentNode.childNodes),a=s.indexOf(t),u=s.indexOf(n);return s.slice(a,u+1)}return[t,n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r="ADDRESS,ARTICLE,ASIDE,BLOCKQUOTE,CANVAS,DD,DIV,DL,DT,FIELDSET,FIGCAPTION,FIGURE,FOOTER,FORM,H1,H2,H3,H4,H5,H6,HEADER,HR,LI,MAIN,NAV,NOSCRIPT,OL,OUTPUT,P,PRE,SECTION,TABLE,TD,TH,TFOOT,UL,VIDEO".split(","),o=["block","list-item","table-cell"];t.default=function(e){var t=i.default(e);return!(!t||!(o.indexOf(e.style.display)>=0||r.indexOf(t)>=0))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(4),o=n(15),s=n(8),a=n(14),u="SPAN,B,I,U,EM,STRONG,STRIKE,S,SMALL".split(",");function l(e,t,n){var i=e.nodeValue.substr(0,t),r=e.nodeValue.substr(t),o=e.ownerDocument.createTextNode(n?i:r);return e.nodeValue=n?r:i,e.parentNode.insertBefore(o,n?e:e.nextSibling),o}t.default=function(e,t,n,c){void 0===n&&(n=new r.default(e,0).normalize()),void 0===c&&(c=new r.default(e,-1).normalize());for(var f=[];n&&c&&c.isAfter(n);){var d=n.node,p=i.default(d.parentNode),h=s.getNextLeafSibling(e,d);3==d.nodeType&&["TR","TABLE"].indexOf(p)<0&&(d!=c.node||c.isAtEnd||(d=l(d,c.offset,!0)),n.offset>0&&(d=l(d,n.offset,!1)),f.push(d)),n=h&&new r.default(h,0)}if(f.length>0){if(f.every(function(e){return e.parentNode==f[0].parentNode})){var v=f.shift();f.forEach(function(e){v.nodeValue+=e.nodeValue,e.parentNode.removeChild(e)}),f=[v]}f.forEach(function(e){for(;"SPAN"!=i.default(e)&&u.indexOf(i.default(e.parentNode))>=0;)e=a.splitBalancedNodeRange(e);t("SPAN"==i.default(e)?e:o.default(e,"span"))})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),r=/^[\r\n]+$/gm;t.default=function(e){return 3==e.nodeType?!e.nodeValue||""==e.textContent||r.test(e.nodeValue):1!=e.nodeType||"none"==i.getComputedStyle(e,"display")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17);function r(e,t){void 0===t&&(t=["font-family","font-size","color","background-color"]);var n=i.default(e),r=[];if(t=t instanceof Array?t:[t],n){var s=(n.ownerDocument.defaultView||window).getComputedStyle(n);if(s)for(var a=0,u=t;a<u.length;a++){var l=u[a],c=(s.getPropertyValue(l)||"").toLowerCase();c="font-size"==l?o(c):c,r.push(c)}}return r}function o(e){return e&&e.indexOf("px")==e.length-2?Math.round(75*parseFloat(e)+.05)/100+"pt":e}t.default=r,t.getComputedStyle=function(e,t){return r(e,t)[0]||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r="AREA,BASE,BR,COL,COMMAND,EMBED,HR,IMG,INPUT,KEYGEN,LINK,META,PARAM,SOURCE,TRACK,WBR".split(",");t.default=function(e){return!!e&&r.indexOf(i.default(e))>=0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n(18),o=n(23),s=n(8);function a(e,t,n){if(!e||!t||!t.node)return null;var a=(t=t.normalize()).node,u=t.offset,l=t.isAtEnd,c=!1;!n&&0==u&&!l||n&&l?a=s.getLeafSibling(e,a,n):3==a.nodeType&&(!n&&!l||n&&u>0)&&(c=!0),a&&o.default(a)&&(a=s.getLeafSibling(e,a,n));var f=i.default(e,a);return f&&(c||f.contains(t))&&(f=n?new r.default(f,t,null):new r.default(f,null,t)),f}t.getInlineElementBefore=function(e,t){return a(e,t,!1)},t.getInlineElementAfter=function(e,t){return a(e,t,!0)},t.getInlineElementBeforeAfter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=e&&e.eventDataCache&&e.eventDataCache.hasOwnProperty(t)?e.eventDataCache[t]:n();return e&&(e.eventDataCache=e.eventDataCache||{},e.eventDataCache[t]=i),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r="ROOSTERJS_TEMP_NODE_FOR_LIST",o='<img class="'+r+'">';function s(e,t){i.applyFormat(e,{fontFamily:t[0],fontSize:t[1],textColor:t[2]})}t.default=function(e,t){i.Browser.isChrome&&function(e){for(var t=e.getSelectionTraverser(),n=t&&t.currentBlockElement;n;){var r=n.getStartNode();if(r&&!i.isNodeEmpty(r)){var s=i.fromHtml(o,e.getDocument())[0];i.isVoidHtmlElement(r)||!i.isBlockElement(r)?r.parentNode.insertBefore(s,r):r.insertBefore(s,r.firstChild)}n=t.getNextBlockElement()}}(e);var n=e.getElementAtCursor(),a=i.getComputedStyles(n),u=e.getElementAtCursor("OL,UL");e.getDocument().execCommand(t,!1,null),e.queryElements("."+r,function(t){return e.deleteNode(t)});var l=e.getElementAtCursor("OL,UL");if(l==u&&(l=null),l&&"OL"==i.getTagOfNode(l)){var c=[].slice.call(l.childNodes).filter(function(e){return"LI"==i.getTagOfNode(e)});if(1==c.length&&i.isNodeEmpty(c[0],!0))s(c[0],a);else for(var f=0,d=c;f<d.length;f++){var p=d[f],h=i.getFirstLeafNode(p);h&&s(p,i.getComputedStyles(h))}}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(71);t.HyperLink=i.default;var r=n(83);t.ContentEdit=r.default;var o=n(124);t.Paste=o.default;var s=n(45);t.getDefaultContentEditFeatures=s.getDefaultContentEditFeatures;var a=n(135);t.Watermark=a.default;var u=n(136);t.TableResize=u.default;var l=n(137);t.CustomReplace=l.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=n(1),o=n(2),s=n(21),a=n(9),u=n(15),l=n(14),c=["TD","TH","LI","BLOCKQUOTE"],f=function(){function e(e,t,n){this.rootNode=e,this.startNode=t,this.endNode=n}return e.getBlockContext=function(e){for(;e&&!s.default(e);)e=e.parentNode;return e},e.prototype.collapseToSingleElement=function(){for(var t=i.default(e.getBlockContext(this.startNode),this.startNode,this.endNode,!0),n=e.getBlockContext(this.startNode);t[0]&&t[0]!=n&&t[0].parentNode!=this.rootNode&&c.indexOf(o.default(t[0].parentNode))<0;)t=[l.splitBalancedNodeRange(t)];return 1==t.length&&s.default(t[0])?t[0]:u.default(t)},e.prototype.getStartNode=function(){return this.startNode},e.prototype.getEndNode=function(){return this.endNode},e.prototype.equals=function(e){return this.startNode==e.getStartNode()&&this.endNode==e.getEndNode()},e.prototype.isAfter=function(e){return a.default(this.getStartNode(),e.getEndNode())},e.prototype.contains=function(e){return r.default(this.startNode,e,!0)||r.default(this.endNode,e,!0)||a.default(e,this.startNode)&&a.default(this.endNode,e)},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.createElement("DIV");return n.innerHTML=e,[].slice.call(n.childNodes)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7);function r(e,t){var n=e;do{n=n&&(t?n.firstChild:n.lastChild)}while(n&&n.firstChild);return n&&i.default(e,n)}t.default=r,t.getFirstBlockElement=function(e){return r(e,!0)},t.getLastBlockElement=function(e){return r(e,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(72),r=n(38),o=n(7),s=n(10),a=n(18),u=n(73),l=n(74),c=n(26),f=n(8),d=function(){function e(e){this.scoper=e}return e.createBodyTraverser=function(t){return new e(new i.default(t))},e.createSelectionTraverser=function(t,n){return new e(new l.default(t,n))},e.createBlockTraverser=function(t,n,i){return void 0===i&&(i=2),new e(new u.default(t,n,i))},Object.defineProperty(e.prototype,"currentBlockElement",{get:function(){return this.currentBlock||(this.currentBlock=this.scoper.getStartBlockElement()),this.currentBlock},enumerable:!0,configurable:!0}),e.prototype.getNextBlockElement=function(){return this.getPreviousNextBlockElement(!0)},e.prototype.getPreviousBlockElement=function(){return this.getPreviousNextBlockElement(!1)},e.prototype.getPreviousNextBlockElement=function(e){var t=this.currentBlockElement,n=f.getLeafSibling(this.scoper.rootNode,e?t.getEndNode():t.getStartNode(),e),i=n?o.default(this.scoper.rootNode,n):null;return i&&this.scoper.isBlockInScope(i)&&(e&&i.isAfter(t)||!e&&t.isAfter(i))?(this.currentBlock=i,this.currentBlock):null},Object.defineProperty(e.prototype,"currentInlineElement",{get:function(){return this.currentInline||(this.currentInline=this.scoper.getStartInlineElement()),this.currentInline instanceof r.default?null:this.currentInline},enumerable:!0,configurable:!0}),e.prototype.getNextInlineElement=function(){return this.getPreviousNextInlineElement(!0)},e.prototype.getPreviousInlineElement=function(){return this.getPreviousNextInlineElement(!1)},e.prototype.getPreviousNextInlineElement=function(e){var t,n=this.currentInlineElement||this.currentInline;return n instanceof r.default?(t=c.getInlineElementBeforeAfter(this.scoper.rootNode,n.getStartPosition(),e))&&!n.getParentBlock().contains(t.getContainerNode())&&(t=null):t=(t=function(e,t,n){if(!t)return null;if(t instanceof a.default){var i=n?t.nextInlineElement:t.previousInlineElement;if(i)return i}var r=t.getContainerNode();return r=f.getLeafSibling(e,r,n),s.default(e,r)}(this.scoper.rootNode,n,e))&&n&&(e&&t.isAfter(n)||!e&&n.isAfter(t))?t:null,t&&(t=this.scoper.trimInlineElement(t))?(this.currentInline=t,this.currentInline):null},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n(37);t.getFirstInlineElement=function(e){var t=r.getFirstLeafNode(e);return t?i.default(e,t):null},t.getLastInlineElement=function(e){var t=r.getLastLeafNode(e);return t?i.default(e,t):null}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t}(n(16).default);t.default=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t}(n(16).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),r=n(8);function o(e,t){for(var n=function(e){return t?e.firstChild:e.lastChild},o=n(e);o&&n(o);)o=n(o);return o&&i.default(o)&&(o=r.getLeafSibling(e,o,t)),o}t.getFirstLeafNode=function(e){return o(e,!0)},t.getLastLeafNode=function(e){return o(e,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.position=e,this.parentBlock=t}return e.prototype.getTextContent=function(){return""},e.prototype.getContainerNode=function(){return this.position.node},e.prototype.getParentBlock=function(){return this.parentBlock},e.prototype.getStartPosition=function(){return this.position},e.prototype.getEndPosition=function(){return this.position},e.prototype.isAfter=function(e){return e&&this.position.isAfter(e.getEndPosition())},e.prototype.isTextualInlineElement=function(){return!1},e.prototype.contains=function(e){return!1},e.prototype.applyStyle=function(e){},e}();t.default=i},function(e,t,n){"use strict";function i(e,t){var n=-1!=e.indexOf("rv:")&&-1!=e.indexOf("Trident"),i=-1!=e.indexOf("MSIE")||n,r=!1,o=!1,s=!1,a=!1,u=-1!=e.indexOf("WebKit");return i||(r=-1!=e.indexOf("Chrome"),o=-1!=e.indexOf("Firefox"),-1!=e.indexOf("Safari")&&(s=-1==e.indexOf("Chrome")&&-1==e.indexOf("Android")),(a=-1!=e.indexOf("Edge"))&&(u=r=o=!1)),{isMac:-1!=t.indexOf("Mac"),isWin:-1!=t.indexOf("Win")||-1!=t.indexOf("NT"),isWebKit:u,isIE:i,isIE11OrGreater:n,isSafari:s,isChrome:r,isFirefox:o,isEdge:a,isIEOrEdge:i||a}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserInfo=i;var r=window?i(window.navigator.userAgent,window.navigator.appVersion):{};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),r=n(2);t.default=function(e,t){var n;if(!e||!t)return null;for(var o=e.ownerDocument.createElement(t),s=0;s<e.attributes.length;s++){var a=e.attributes[s];o.setAttribute(a.name,a.value)}for(;e.firstChild;)o.appendChild(e.firstChild);return"P"!=r.default(e)&&"P"!=r.default(o)||(n=i.default(e,["margin-top","margin-bottom"]),o.style.marginTop=n[0],o.style.marginBottom=n[1]),e.parentNode&&e.parentNode.replaceChild(o,e),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=["IMG"],o=["TABLE","IMG","LI"].join(","),s=/\u200b/g;function a(e,t){return e=e.replace(s,""),t?e.trim():e}t.default=function(e,t){if(!e)return!1;if(3==e.nodeType)return""==a(e.nodeValue,t);if(1==e.nodeType){var n=e;if(""!=a(n.textContent,t)||r.indexOf(i.default(n))>=0||n.querySelectorAll(o)[0])return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(41);function o(e){for(;e.previousSibling;)if(e=e.previousSibling,!r.default(e))return!1;return!0}t.default=function(e,t){if(e){var n=e.normalize(),r=n.node;if(0==n.offset){for(;i.default(t,r)&&o(r);)r=r.parentNode;return r==t}}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e?e.parentNode:null;if(!t)return null;for(;e.firstChild;)t.insertBefore(e.firstChild,e);return t.removeChild(e),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;if(this.trs=[],this.table=e instanceof HTMLTableElement?e:function(e){for(var t=e;t&&"TABLE"!=t.tagName;t=t.parentElement);return t}(e),this.table){var n=e instanceof HTMLTableElement?null:e,i=[].slice.call(this.table.rows);this.cells=i.map(function(e){return[]}),i.forEach(function(e,i){t.trs[i%2]=e;for(var r=0,o=0;r<e.cells.length;r++){for(;t.cells[i][o];o++);var s=e.cells[r];s==n&&(t.col=o,t.row=i);for(var a=0;a<s.colSpan;a++,o++)for(var u=0;u<s.rowSpan;u++)t.cells[i+u][o]={td:a+u==0?s:null,spanLeft:a>0,spanAbove:u>0}}})}}return e.prototype.writeBack=function(){var e=this;this.cells?(a(this.table),this.cells.forEach(function(t,n){var i=s(e.trs[n%2]||e.trs[0]);e.table.appendChild(i),t.forEach(function(t,r){t.td&&(e.recalcSpans(n,r),i.appendChild(t.td))})})):this.table&&this.table.parentNode.removeChild(this.table)},e.prototype.applyFormat=function(e){e&&this.table&&(this.table.style.borderCollapse="collapse",this.trs[0].style.backgroundColor=e.bgColorOdd||"transparent",this.trs[1]&&(this.trs[1].style.backgroundColor=e.bgColorEven||"transparent"),this.cells.forEach(function(t){return t.filter(function(e){return e.td}).forEach(function(t){t.td.style.borderTop=r(e.topBorderColor),t.td.style.borderBottom=r(e.bottomBorderColor),t.td.style.borderLeft=r(e.verticalBorderColor),t.td.style.borderRight=r(e.verticalBorderColor)})}))},e.prototype.edit=function(e){var t=this;if(this.table){var n=this.cells[this.row],i=n[this.col];switch(e){case 0:this.cells.splice(this.row,0,n.map(o));break;case 1:var r=this.row+this.countSpanAbove(this.row,this.col);this.cells.splice(r,0,this.cells[r-1].map(function(e,n){var i=t.getCell(r,n);if(i.spanAbove)return o(i);if(e.spanLeft){var a=o(e);return a.spanAbove=!1,a}return{td:s(t.getTd(t.row,n))}}));break;case 2:this.forEachCellOfCurrentColumn(function(e,n){n.splice(t.col,0,o(e))});break;case 3:var u=this.col+this.countSpanLeft(this.row,this.col);this.forEachCellOfColumn(u-1,function(e,n,i){var r,a=t.getCell(i,u);a.spanLeft?r=o(a):e.spanAbove?(r=o(e)).spanLeft=!1:r={td:s(t.getTd(i,t.col))},n.splice(u,0,r)});break;case 6:this.forEachCellOfCurrentRow(function(e,n){var i=t.getCell(t.row+1,n);e.td&&e.td.rowSpan>1&&i.spanAbove&&(i.td=e.td)}),this.cells.splice(this.row,1);break;case 5:this.forEachCellOfCurrentColumn(function(e,n,i){var r=t.getCell(i,t.col+1);e.td&&e.td.colSpan>1&&r.spanLeft&&(r.td=e.td),n.splice(t.col,1)});break;case 7:case 8:for(var l=7==e?-1:1,c=this.row+l;c>=0&&c<this.cells.length;c+=l){if((v=this.getCell(c,this.col)).td&&!v.spanAbove){var f=c<this.row?v:i,d=c<this.row?i:v;f.td.colSpan==d.td.colSpan&&(a(d.td,f.td),d.td=null,d.spanAbove=!0);break}}break;case 9:case 10:for(var p=9==e?-1:1,h=this.col+p;h>=0&&h<this.cells[this.row].length;h+=p){var v;if((v=this.getCell(this.row,h)).td&&!v.spanLeft){var g=h<this.col?v:i,m=h<this.col?i:v;g.td.rowSpan==m.td.rowSpan&&(a(m.td,g.td),m.td=null,m.spanLeft=!0);break}}break;case 4:this.cells=null;break;case 12:if(i.td.rowSpan>1)this.getCell(this.row+1,this.col).td=s(i.td);else{var y=n.map(function(e){return{td:e==i?s(e.td):null,spanAbove:e!=i,spanLeft:e.spanLeft}});this.cells.splice(this.row+1,0,y)}break;case 11:i.td.colSpan>1?this.getCell(this.row,this.col+1).td=s(i.td):this.forEachCellOfCurrentColumn(function(e,i){i.splice(t.col+1,0,{td:i==n?s(e.td):null,spanAbove:e.spanAbove,spanLeft:i!=n})})}}},e.prototype.forEachCellOfCurrentColumn=function(e){this.forEachCellOfColumn(this.col,e)},e.prototype.forEachCellOfCurrentRow=function(e){this.forEachCellOfRow(this.row,e)},e.prototype.getCell=function(e,t){return this.cells&&this.cells[e]&&this.cells[e][t]||{}},e.prototype.getCurrentTd=function(){return this.getTd(this.row,this.col)},e.prototype.getTd=function(e,t){if(this.cells)for(e=Math.min(this.cells.length-1,e),t=Math.min(this.cells[e].length-1,t);e>=0&&t>=0;){var n=this.getCell(e,t);if(n.td)return n.td;if(n.spanLeft)t--;else{if(!n.spanAbove)break;e--}}return null},e.prototype.forEachCellOfColumn=function(e,t){for(var n=0;n<this.cells.length;n++)t(this.getCell(n,e),this.cells[n],n)},e.prototype.forEachCellOfRow=function(e,t){for(var n=0;n<this.cells[e].length;n++)t(this.getCell(e,n),n)},e.prototype.recalcSpans=function(e,t){var n=this.getCell(e,t).td;n&&(n.colSpan=this.countSpanLeft(e,t),n.rowSpan=this.countSpanAbove(e,t),1==n.colSpan&&n.removeAttribute("colSpan"),1==n.rowSpan&&n.removeAttribute("rowSpan"))},e.prototype.countSpanLeft=function(e,t){for(var n=1,i=t+1;i<this.cells[e].length;i++){var r=this.getCell(e,i);if(r.td||!r.spanLeft)break;n++}return n},e.prototype.countSpanAbove=function(e,t){for(var n=1,i=e+1;i<this.cells.length;i++){var r=this.getCell(i,t);if(r.td||!r.spanAbove)break;n++}return n},e}();function r(e){return"solid 1px "+(e||"transparent")}function o(e){return{td:s(e.td),spanAbove:e.spanAbove,spanLeft:e.spanLeft}}function s(e){var t=e?e.cloneNode(!1):null;return t&&t instanceof HTMLTableCellElement&&(t.removeAttribute("id"),t.firstChild||t.appendChild(e.ownerDocument.createElement("br"))),t}function a(e,t){for(;e.firstChild;)t?t.appendChild(e.firstChild):e.removeChild(e.firstChild)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.getDefaultContentEditFeatures=function(){return{autoLink:!0,indentWhenTab:!0,outdentWhenShiftTab:!0,outdentWhenBackspaceOnEmptyFirstLine:!0,outdentWhenEnterOnEmptyLine:i.Browser.isIE,mergeInNewLineWhenBackspaceOnFirstChar:!1,unquoteWhenBackspaceOnEmptyFirstLine:!0,unquoteWhenEnterOnEmptyLine:!0,autoBullet:!0,tabInTable:!0,upDownInTable:i.Browser.isChrome||i.Browser.isSafari,defaultShortcut:!0,unlinkWhenBackspaceAfterLink:!1,smartOrderedList:!1,smartOrderedListStyles:["lower-alpha","lower-roman","decimal"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function r(e){var t=e.getStartNode();return e instanceof i.StartEndBlockElement&&t==e.getEndNode()&&3==t.nodeType&&["TR","TABLE"].indexOf(i.getTagOfNode(t.parentNode))>=0}t.default=function(e,t){for(var n=e.getSelectionTraverser(),i=n&&n.currentBlockElement,o=[];i;)r(i)||o.push(i),i=n.getNextBlockElement();o.forEach(function(e){var n=e.collapseToSingleElement();t(n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12);t.default=function(e,t){t=t.trim(),i.default(e,function(e){return e.style.backgroundColor=t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12);t.default=function(e,t){t=t.trim(),i.default(e,function(e){return e.style.fontFamily=t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=n(0);t.default=function(e,t){t=t.trim(),i.default(e,function(e){e.style.fontSize=t,"normal"!=r.getComputedStyle(e,"line-height")&&(e.style.lineHeight="normal")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12);t.default=function(e,t){t=t.trim(),i.default(e,function(e){return e.style.color=t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e){i.default(e,"bold")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e){i.default(e,"italic")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e){i.default(e,"underline")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(e){var t=this;this.disableRestoreSelectionOnFocus=e,this.inIme=!1,this.onNativeEvent=function(e){t.editor.runAsync(function(){t.editor.addUndoSnapshot(function(){},"cut"==e.type?"Cut":"Drop")})}}return e.prototype.getName=function(){return"DOMEvent"},e.prototype.initialize=function(e){var t,n=this;this.editor=e,this.disposer=e.addDomEventHandler(((t={compositionstart:function(){return n.inIme=!0},compositionend:function(t){n.inIme=!1,e.triggerEvent({eventType:3,rawEvent:t})}})[i.Browser.isIEOrEdge?"beforedeactivate":"blur"]=function(){return e.saveSelectionRange()},t.focus=!this.disableRestoreSelectionOnFocus&&function(){return e.restoreSavedRange()},t.drop=this.onNativeEvent,t.cut=this.onNativeEvent,t))},e.prototype.dispose=function(){this.disposer(),this.disposer=null,this.editor=null},e.prototype.isInIME=function(){return this.inIme},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.currentFeature=null,this.featureMap={},this.autoCompleteSnapshot=null,this.autoCompleteChangeSource=null}return e.prototype.getName=function(){return"Edit"},e.prototype.initialize=function(e){var t=this;this.editor=e,this.addFeature({keys:[8],shouldHandleEvent:function(){return null!==t.autoCompleteSnapshot},handleEvent:function(e,n){e.rawEvent.preventDefault(),n.setContent(t.autoCompleteSnapshot,!1)}})},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){var t=!1;switch(e.eventType){case 6:this.autoCompleteChangeSource!=e.source&&(t=!0),this.currentFeature||this.findFeature(e);break;case 4:case 0:t=!0}if(this.currentFeature){var n=this.currentFeature;this.currentFeature=null,n.handleEvent(e,this.editor)}t&&(this.autoCompleteSnapshot=null,this.autoCompleteChangeSource=null)},e.prototype.willHandleEventExclusively=function(e){return this.findFeature(e),!!this.currentFeature},e.prototype.addFeature=function(e){var t=this;e.initialize&&e.initialize(this.editor),e.keys.forEach(function(n){var i=t.featureMap[n]||[];i.push(e),t.featureMap[n]=i})},e.prototype.performAutoComplete=function(e,t){var n=this;this.editor.addUndoSnapshot(function(i,r,o){var s=e();return n.autoCompleteSnapshot=o,n.autoCompleteChangeSource=t,s},t)},e.prototype.findFeature=function(e){var t,n=this,i=!1;if(0==e.eventType){var r=e.rawEvent;i=r.ctrlKey||r.altKey||r.metaKey,t=this.featureMap[r.which]}else 6==e.eventType&&(t=this.featureMap[2048]);this.currentFeature=t&&t.filter(function(t){return(t.allowFunctionKeys||!i)&&t.shouldHandleEvent(e,n.editor)})[0]},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),r=n(0),o=function(){function e(){}return e.prototype.getName=function(){return"FirefoxTypeAfterLink"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){if(1==e.eventType){var t=this.editor.getSelectionRange();if(t&&t.collapsed&&this.editor.getElementAtCursor("A[href]")){var n=i.cacheGetContentSearcher(e,this.editor).getInlineElementBefore();n instanceof r.LinkInlineElement&&this.editor.select(new r.Position(n.getContainerNode(),-3))}}},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),r=n(58),o="CONTENTSEARCHER";t.cacheGetContentSearcher=function(e,t){return i.default(e,o,function(){return t.getContentSearcherOfCursor()})},t.clearContentSearcherCache=function(e){r.default(e,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e&&e.eventDataCache&&e.eventDataCache.hasOwnProperty(t)&&delete e.eventDataCache[t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){var t=e.document.activeElement;return t&&i.contains(e.contentDiv,t,!0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.onMouseUp=function(t){e.editor&&(e.removeMouseUpEventListener(),e.editor.triggerEvent({eventType:5,rawEvent:t}))}}return e.prototype.getName=function(){return"MouseUp"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.removeMouseUpEventListener(),this.editor=null},e.prototype.onPluginEvent=function(e){4!=e.eventType||this.mouseUpEventListerAdded||(this.editor.getDocument().addEventListener("mouseup",this.onMouseUp,!0),this.mouseUpEventListerAdded=!0)},e.prototype.removeMouseUpEventListener=function(){this.mouseUpEventListerAdded&&(this.mouseUpEventListerAdded=!1,this.editor.getDocument().removeEventListener("mouseup",this.onMouseUp,!0))},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(){}return e.prototype.getName=function(){return"TypeInContainer"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){1==e.eventType&&this.onKeyPress(e)},e.prototype.ensureTypeInElement=function(e,t){var n,r=e.normalize(),o=this.editor.getBlockElementAtNode(r.node);if(o){n=o.collapseToSingleElement();var s=i.isNodeEmpty(n)||t&&this.wasNodeJustCreatedByKeyboardEvent(t,n);n=n&&s?n:null}else n=i.fromHtml(i.Browser.isEdge?"<div><span><br></span></div>":"<div><br></div>",this.editor.getDocument())[0],this.editor.insertNode(n,{position:1,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),r=new i.Position(n.firstChild,0);return n&&i.applyFormat(n,this.editor.getDefaultFormat()),r},e.prototype.onKeyPress=function(e){var t=this,n=this.editor.getSelectionRange();n&&!this.editor.contains(i.findClosestElementAncestor(n.startContainer))&&(n.collapsed?this.tryNormalizeTyping(e,n):n.collapsed||this.editor.runAsync(function(){t.tryNormalizeTyping(e)}))},e.prototype.tryNormalizeTyping=function(e,t){var n=this.ensureTypeInElement(i.Position.getStart(t||this.editor.getSelectionRange()),e);this.editor.select(n)},e.prototype.wasNodeJustCreatedByKeyboardEvent=function(e,t){return e.rawEvent.target instanceof Node&&e.rawEvent.target.contains(t)&&e.rawEvent.key===t.innerText},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(100),r=function(){function e(e,t){void 0===t&&(t=1e7),this.preserveSnapshots=e,this.maxBufferSize=t}return e.prototype.getName=function(){return"Undo"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null,this.preserveSnapshots||this.clear()},e.prototype.onPluginEvent=function(e){if(!this.editor.isInIME())switch(e.eventType){case 9:this.addUndoSnapshot();break;case 0:this.onKeyDown(e.rawEvent);break;case 1:this.onKeyPress(e.rawEvent);break;case 3:this.clearRedoForInput(),this.addUndoSnapshot();break;case 6:this.isRestoring||this.clearRedoForInput()}},e.prototype.clear=function(){this.undoSnapshots=null,this.hasNewContent=!1},e.prototype.undo=function(){this.hasNewContent&&this.addUndoSnapshot(),this.restoreSnapshot(-1)},e.prototype.redo=function(){this.restoreSnapshot(1)},e.prototype.canUndo=function(){return this.hasNewContent||this.getSnapshotsManager().canMove(-1)},e.prototype.canRedo=function(){return this.getSnapshotsManager().canMove(1)},e.prototype.addUndoSnapshot=function(){var e=this.editor.getContent(!1,!0);return this.getSnapshotsManager().addSnapshot(e),this.hasNewContent=!1,e},e.prototype.getSnapshotsManager=function(){return this.undoSnapshots||(this.undoSnapshots=new i.default(this.maxBufferSize)),this.undoSnapshots},e.prototype.restoreSnapshot=function(e){var t=this.getSnapshotsManager().move(e);if(null!=t)try{this.isRestoring=!0,this.editor.setContent(t)}finally{this.isRestoring=!1}},e.prototype.onKeyDown=function(e){if(8==e.which||46==e.which){var t=this.editor.getSelectionRange();t&&(!t.collapsed||this.lastKeyPress!=e.which||e.ctrlKey||e.metaKey)&&this.addUndoSnapshot(),this.hasNewContent=!0,this.lastKeyPress=e.which}else e.which>=33&&e.which<=40&&(this.hasNewContent&&this.addUndoSnapshot(),this.lastKeyPress=0)},e.prototype.onKeyPress=function(e){if(!e.metaKey){var t=this.editor.getSelectionRange();t&&!t.collapsed||32==e.which&&32!=this.lastKeyPress||13==e.which?(this.addUndoSnapshot(),13==e.which&&(this.hasNewContent=!0)):this.clearRedoForInput(),this.lastKeyPress=e.which}},e.prototype.clearRedoForInput=function(){this.getSnapshotsManager().clearRedo(),this.lastKeyPress=0,this.hasNewContent=!0},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r="&#8203;",o="LI,THEAD,TBODY,TR,TD,TH".split(","),s=function(e){};t.default=function(e,t,n,a,u){void 0===a&&(a=function(e){return i.wrap(e,t)}),void 0===u&&(u=i.unwrap),e.focus(),e.addUndoSnapshot(function(l,c){var f,d=e.getSelectionRange();if(d&&0==e.queryElements(t,1,u).length){var p=i.Position.getStart(d).normalize().node,h=e.getBlockElementAtNode(p),v=i.Position.getEnd(d).normalize().node,g=e.getBlockElementAtNode(v),m=h&&g?e.collapseNodes(h.getStartNode(),g.getEndNode(),!0):[];if(0==m.length)m=i.fromHtml("<DIV>"+(i.Browser.isIEOrEdge?r:"<BR>")+"</DIV>",e.getDocument()),e.insertNode(m[0]),e.select(m[0],0);else if(1==m.length){var y=i.getTagOfNode(m[0]);"BR"==y?m=[i.wrap(m[0])]:"LI"!=y&&"TD"!=y||(m=[].slice.call(m[0].childNodes))}else for(;m[0]&&e.contains(m[0].parentNode)&&m.some(function(e){return o.indexOf(i.getTagOfNode(e))>=0});)m=[i.splitBalancedNodeRange(m)];f=a(m),(n||s)(f)}return!e.select(l,c)&&f&&e.select(f),f},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign?function(e,t){return Object.assign(t||{},e)}:function(e,t){var n=t||{};if(e)for(var i=0,r=Object.keys(e);i<r.length;i++){var o=r[i];n[o]=e[o]}return n};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="border-spacing,caption-side,color,cursor,direction,empty-cells,font-family,font-size,font-style,font-variant,font-weight,font,letter-spacing,line-height,list-style-image,list-style-position,list-style-type,list-style,orphans,quotes,text-align,text-indent,text-transform,visibility,white-space,widows,word-spacing".split(",");t.default=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView,n=t&&t.getComputedStyle(e),r={};return i.forEach(function(e){return r[e]=n&&n.getPropertyValue(e)||""}),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="\x3c!--StartFragment--\x3e",r="\x3c!--EndFragment--\x3e";function o(e){var t=e.indexOf(i),n=e.lastIndexOf(r);if(t>=0&&n>=0&&n>=t+i.length){var o=e.substr(0,t),s=e.substr(n+r.length);return[e=e.substring(t+i.length,n),o,s]}return[e,null,null]}t.default=function(e,t,n){var i=(new DOMParser).parseFromString(e||"","text/html");return i&&i.body&&i.body.firstChild?(t&&(n||function(e,t){var n=o(t)[0];e.body.innerHTML=n})(i,e),i):null},t.splitWithFragment=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="NodeId";function r(e,t){var n=t.getAttribute(i);return n||(n=e.nextNodeId.toString(),e.nextNodeId++,t.setAttribute(i,n)),n}t.createCustomData=function(){return{dict:{},nextNodeId:1}},t.setObject=function(e,t,n,i){if(1==t.nodeType){var o=r(e,t);""!=o&&(e.dict[o]||(e.dict[o]={}),e.dict[o][n]=i)}},t.getObject=function(e,t,n){if(1==t.nodeType){var i=r(e,t);if(""!=i)return e.dict[i]&&e.dict[i][n]}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLevelLists=function(){return{listsMetadata:{},currentUniqueListId:-1}}},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var r=n(70);t.createEditor=r.default,i(n(138)),i(n(0)),i(n(3)),i(n(6)),i(n(29)),i(n(139)),i(n(13)),i(n(141))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29),r=n(3);t.default=function(e,t,n){var o=[new i.HyperLink,new i.Paste,new i.ContentEdit];t&&(o=o.concat(t));var s={plugins:o,initialContent:n,defaultFormat:{fontFamily:"Calibri,Arial,Helvetica,sans-serif",fontSize:"11pt",textColor:"#000000"}};return new r.Editor(e,s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(e,t,n){void 0===e&&(e=function(e){return e});var i=this;this.getTooltipCallback=e,this.target=t,this.onLinkClick=n,this.onMouse=function(e){var t=i.editor.getElementAtCursor("a[href]",e.srcElement),n=i.tryGetHref(t);n&&i.editor.setEditorDomAttribute("title","mouseover"==e.type?i.getTooltipCallback(n,t):null)}}return e.prototype.getName=function(){return"Hyperlink"},e.prototype.initialize=function(e){this.editor=e,this.disposer=this.getTooltipCallback&&e.addDomEventHandler({mouseover:this.onMouse,mouseout:this.onMouse})},e.prototype.dispose=function(){this.disposer(),this.disposer=null,this.editor=null},e.prototype.onPluginEvent=function(e){if(5==e.eventType){var t=this.editor.getElementAtCursor("A",e.rawEvent.srcElement);if(t){if(this.onLinkClick)return void this.onLinkClick(t,e.rawEvent);var n=void 0;if(!i.Browser.isFirefox&&(n=this.tryGetHref(t))&&(i.Browser.isMac?e.rawEvent.metaKey:e.rawEvent.ctrlKey))try{var r=this.target||"_blank";this.editor.getDocument().defaultView.open(n,r)}catch(e){}}}},e.prototype.tryGetHref=function(e){try{return e?e.href:null}catch(e){}},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(32),o=n(34),s=function(){function e(e){this.rootNode=e}return e.prototype.getStartBlockElement=function(){return r.getFirstBlockElement(this.rootNode)},e.prototype.getStartInlineElement=function(){return o.getFirstInlineElement(this.rootNode)},e.prototype.isBlockInScope=function(e){return i.default(this.rootNode,e.getStartNode())},e.prototype.trimInlineElement=function(e){return e},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),r=n(7),o=n(10),s=n(19),a=n(4),u=n(26),l=n(34),c=function(){function e(e,t,n){this.rootNode=e,this.startFrom=n,t=t instanceof Range?a.default.getStart(t):t,this.position=t.normalize(),this.block=r.default(this.rootNode,this.position.node)}return e.prototype.getStartBlockElement=function(){return this.block},e.prototype.getStartInlineElement=function(){if(this.block)switch(this.startFrom){case 0:case 1:return function(e,t){if(e instanceof s.default){var n=e.getStartNode();return t?l.getFirstInlineElement(n):l.getLastInlineElement(n)}return o.default(e,t?e.getStartNode():e.getEndNode())}(this.block,0==this.startFrom);case 2:var e=u.getInlineElementAfter(this.rootNode,this.position);return e&&this.block.contains(e.getContainerNode())?e:new i.default(this.position,this.block)}return null},e.prototype.isBlockInScope=function(e){return!(!this.block||!e)&&this.block.equals(e)},e.prototype.trimInlineElement=function(e){return this.block&&e&&this.block.contains(e.getContainerNode())?e:null},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n(18),o=n(4),s=n(26),a=function(){function e(e,t){this.rootNode=e,this.start=o.default.getStart(t).normalize(),this.end=o.default.getEnd(t).normalize()}return e.prototype.getStartBlockElement=function(){return this.startBlock||(this.startBlock=i.default(this.rootNode,this.start.node)),this.startBlock},e.prototype.getStartInlineElement=function(){return this.startInline||(this.startInline=this.trimInlineElement(s.getInlineElementAfter(this.rootNode,this.start))),this.startInline},e.prototype.isBlockInScope=function(e){if(!e)return!1;var t=!1,n=this.getStartBlockElement();if(this.start.equalTo(this.end))t=n&&n.equals(e);else{var r=i.default(this.rootNode,this.end.node);t=n&&r&&(e.equals(n)||e.equals(r)||e.isAfter(n)&&r.isAfter(e))}return t},e.prototype.trimInlineElement=function(e){if(!e||this.start.equalTo(this.end))return null;var t=e.getStartPosition(),n=e.getEndPosition();if(t.isAfter(this.end)||this.start.isAfter(n))return null;var i=!1,o=!1;return this.start.isAfter(t)&&(t=this.start,i=!0),n.isAfter(this.end)&&(n=this.end,o=!0),t.isAfter(n)||t.equalTo(n)?null:i||o?new r.default(e,i&&t,o&&n):e},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=n(11),o=/[\s\u00A0\u200B\u3000]+([^\s\u00A0\u200B\u3000]*)$/i,s=function(){function e(e,t){this.rootNode=e,this.position=t,this.text="",this.inlineElements=[]}return e.prototype.getWordBefore=function(){var e=this;return this.word||this.traverse(function(){return e.word}),this.word},e.prototype.getInlineElementBefore=function(){return this.inlineBefore||this.traverse(null),this.inlineBefore},e.prototype.getInlineElementAfter=function(){return this.inlineAfter||(this.inlineAfter=i.default.createBlockTraverser(this.rootNode,this.position).currentInlineElement),this.inlineAfter},e.prototype.getSubStringBefore=function(e){var t=this;return this.text.length<e&&this.traverse(function(){return t.text.length>=e}),this.text.substr(Math.max(0,this.text.length-e))},e.prototype.getRangeFromText=function(e,t){if(!e)return null;var n,i,o=e.length-1;return this.forEachTextInlineElement(function(r){for(var s=r.getTextContent()||"",a=s.length-1;a>=0&&o>=0;a--)if(e.charCodeAt(o)==s.charCodeAt(a))o--,i||(i=r.getStartPosition().move(a+1));else if(t||i)return!0;return-1==o&&(n=r.getStartPosition().move(a+1),!0)}),n&&i&&r.default(n,i)},e.prototype.forEachTextInlineElement=function(e){this.inlineElements.some(e)||this.traverse(e)},e.prototype.getNearestNonTextInlineElement=function(){var e=this;return this.nearestNonTextInlineElement||this.traverse(function(){return e.nearestNonTextInlineElement}),this.nearestNonTextInlineElement},e.prototype.traverse=function(e){if(this.traverser=this.traverser||i.default.createBlockTraverser(this.rootNode,this.position),this.traverser&&!this.traversingComplete)for(var t=this.traverser.getPreviousInlineElement();!this.traversingComplete;){if(this.inlineBefore=this.inlineBefore||t,!t||!t.isTextualInlineElement()){this.nearestNonTextInlineElement=t,this.traversingComplete=!0,this.word||(this.word=this.text);break}var n=t.getTextContent();if(!this.word){var r=o.exec(n);r&&2==r.length&&(this.word=r[1]+this.text)}if(this.text=n+this.text,this.inlineElements.push(t),e&&e(t))break;t=this.traverser.getPreviousInlineElement()}},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t){var n=e.style,i=t.fontFamily,r=t.fontSize,o=t.textColor,s=t.backgroundColor,a=t.bold,u=t.italic,l=t.underline;i&&(n.fontFamily=i),r&&(n.fontSize=r),o&&(n.color=o),s&&(n.backgroundColor=s),a&&(n.fontWeight="bold"),u&&(n.fontStyle="italic"),l&&(n.textDecoration="underline")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(39),r=/^Version:[0-9\.]+\s+StartHTML:\s*([0-9]+)\s+EndHTML:\s*([0-9]+)\s+/i;function o(e){for(var t=e.items?e.items.length:0,n=0;n<t;n++){var i=e.items[n];if(i.type&&0==i.type.indexOf("image/"))return i.getAsFile()}t=e.files?e.files.length:0;for(n=0;n<t;n++){var r=e.files.item(n);if(r.type&&0==r.type.indexOf("image/"))return r}return null}function s(e){var t=r.exec(e);if(t&&3==t.length){var n=parseInt(t[1]),i=parseInt(t[2]);n>0&&i>n&&(e=e.substring(n,i))}return e}t.default=function(e,t){var n=e.clipboardData||e.srcElement.ownerDocument.defaultView.clipboardData,r={types:n.types?[].slice.call(n.types):[],text:n.getData("text"),image:o(n),html:void 0};if(e.clipboardData&&e.clipboardData.items){e.preventDefault();for(var a=e.clipboardData.items,u=0;u<a.length;u++){var l=a[u];if(l.type&&0==l.type.indexOf("text/html"))return void l.getAsString(function(e){r.html=i.default.isEdge?s(e):e,t(r)})}r.html=null}t(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=/^[^?]+%[^0-9a-f]+|^[^?]+%[0-9a-f][^0-9a-f]+|^[^?]+%00|^[^?]+%$|^https?:\/\/[^?\/]+@|^www\.[^?\/]+@/i,r="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)*[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\\:[0-9]+)?(?:[\\/\\?]\\S*)?",o={http:{match:new RegExp("^(?:microsoft-edge:)?http:\\/\\/"+r+"|www\\."+r,"i"),except:i,normalizeUrl:function(e){return new RegExp("^(?:microsoft-edge:)?http:\\/\\/","i").test(e)?e:"http://"+e}},https:{match:new RegExp("^(?:microsoft-edge:)?https:\\/\\/"+r,"i"),except:i},mailto:{match:new RegExp("^mailto:\\S+@\\S+\\.\\S+","i")},notes:{match:new RegExp("^notes:\\/\\/\\S+","i")},file:{match:new RegExp("^file:\\/\\/\\/?\\S+","i")},unc:{match:new RegExp("^\\\\\\\\\\S+","i")},ftp:{match:new RegExp("^ftp:\\/\\/"+r+"|ftp\\."+r,"i"),normalizeUrl:function(e){return new RegExp("^ftp:\\/\\/","i").test(e)?e:"ftp://"+e}},news:{match:new RegExp("^news:(\\/\\/)?"+r,"i")},telnet:{match:new RegExp("^telnet:(\\/\\/)?"+r,"i")},gopher:{match:new RegExp("^gopher:\\/\\/"+r,"i")},wais:{match:new RegExp("^wais:(\\/\\/)?"+r,"i")}};t.default=function(e){if(e)for(var t=0,n=Object.keys(o);t<n.length;t++){var i=n[t],r=o[i],s=e.match(r.match);if(s&&s[0]==e&&(!r.except||!r.except.test(e)))return{scheme:i,originalUrl:e,normalizedUrl:r.normalizeUrl?r.normalizeUrl(e):e}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(40),r=n(17),o=n(2),s=n(42),a=n(25),u=n(4),l=n(43),c=n(44),f=n(15);t.default=function(e,t,n){var d=t;if(11==d.nodeType){var p=[].slice.call(d.childNodes).filter(function(e){return"BR"!=o.default(e)});d=1==p.length?p[0]:null}var h=o.default(d),v=h&&"BR"==o.default(d.nextSibling),g=r.default(n.node,e,"LI"),m=g&&r.default(g,e,"OL,UL"),y=r.default(n.node,e,"TD,TH"),E=y&&r.default(y,e,"TR");if("LI"==h&&(h=m?o.default(m):"UL",d=f.default(d,h)),"OL"!=h&&"UL"!=h||"LI"!=o.default(d.firstChild)){if("TABLE"==h&&E){var b=new c.default(d),S=new c.default(y);0==S.col&&y==S.getCell(S.row,0).td&&b.cells[0]&&b.cells[0].length==S.cells[0].length&&s.default(n,y)&&("TBODY"!=o.default(d.firstChild)||d.firstChild.nextSibling||l.default(d.firstChild),l.default(d),n=new u.default(E,-3))}}else{var C=!d.firstChild.nextSibling&&!v;v&&d.parentNode&&d.parentNode.removeChild(d.nextSibling),C?(l.default(d.firstChild),l.default(d)):o.default(m)==h&&(l.default(d),n=new u.default(g,s.default(n,g)?-2:-3))}if("P"==o.default(n.node)){var w=n.normalize(),O=i.default(n.node,"div");w.node!=O&&(n=w)}return a.default(n.node)&&(n=new u.default(n.node,n.isAtEnd?-3:-2)),n}},function(e,t,n){"use strict";function i(e,t){return t.some(function(t){return 0==t?0==e:(e&t)==t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o){if(void 0===r&&(r=0),!e||!t)return[];var s=[].slice.call(e.querySelectorAll(t));return 0!=r&&o&&(s=s.filter(function(e){return function(e,t,n){var r=e.compareDocumentPosition(t.startContainer),o=e.compareDocumentPosition(t.endContainer),s=[0,8];return n||s.push(16),i(r,s)||i(o,s)||i(r,[2])&&i(o,[4])&&!i(o,[16])}(e,o,2==r)})),n&&s.forEach(n),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11);function r(e){var t=e||{},n=t.left,i=t.right,r=t.top,o=t.bottom;return n+i+r+o>0?{left:Math.round(n),right:Math.round(i),top:Math.round(r),bottom:Math.round(o)}:null}t.default=function(e){if(!e)return null;var t=i.default(e),n=t.getBoundingClientRect&&r(t.getBoundingClientRect());if(n)return n;e=e.normalize();var o=t.getClientRects&&t.getClientRects();if(n=o&&1==o.length&&r(o[0]))return n;if(3==e.node.nodeType){var s=document.createElement("SPAN");if(s.innerHTML="â€‹",(t=i.default(e)).insertNode(s),n=s.getBoundingClientRect&&r(s.getBoundingClientRect()),s.parentNode.removeChild(s),n)return n}var a=e.element;return a&&a.getBoundingClientRect&&(n=r(a.getBoundingClientRect()))?n:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(11),o=n(4);function s(e,t){if(!e||!t)return null;for(var n,i=0;i<t.length&&(n=t[i],i<t.length-1&&e&&1==e.nodeType&&e.childNodes.length>n);i++)e=e.childNodes[n];return new o.default(e,n)}function a(e,t){if(!e||!t)return[];var n,r=e.node,o=e.offset,s=[];if(!i.default(t,r,!0))return[];if(3==r.nodeType){for(n=r.parentNode;r.previousSibling&&3==r.previousSibling.nodeType;)o+=r.previousSibling.nodeValue.length,r=r.previousSibling;s.unshift(o)}else n=r,r=r.childNodes[o];do{o=0;for(var a=!1,u=n.firstChild;u&&u!=r;u=u.nextSibling){if(3==u.nodeType){if(0==u.nodeValue.length||a)continue;a=!0}else a=!1;o++}s.unshift(o),r=n,n=n.parentNode}while(r&&r!=t);return s}t.default=function(e,t){return t?{start:a(o.default.getStart(t),e),end:a(o.default.getEnd(t),e)}:null},t.getRangeFromSelectionPath=function(e,t){var n=s(e,t.start),i=s(e,t.end);return r.default(n,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),r=n(84),o=n(120),s=n(121),a=n(122),u=n(123),l=function(){function e(e){this.featureSet=e}return e.prototype.getName=function(){return"ContentEdit"},e.prototype.initialize=function(e){var t=this;this.editor=e,this.getFilteredFeatures().forEach(function(e){return t.editor.addContentEditFeature(e)})},e.prototype.dispose=function(){this.editor=null},e.prototype.getFilteredFeatures=function(){var e=this.featureSet||i.getDefaultContentEditFeatures(),t={indentWhenTab:a.IndentWhenTab,outdentWhenShiftTab:a.OutdentWhenShiftTab,outdentWhenBackspaceOnEmptyFirstLine:a.OutdentWhenBackOn1stEmptyLine,outdentWhenEnterOnEmptyLine:a.OutdentWhenEnterOnEmptyLine,mergeInNewLineWhenBackspaceOnFirstChar:a.MergeInNewLine,unquoteWhenBackspaceOnEmptyFirstLine:u.UnquoteWhenBackOnEmpty1stLine,unquoteWhenEnterOnEmptyLine:u.UnquoteWhenEnterOnEmptyLine,tabInTable:s.TabInTable,upDownInTable:s.UpDownInTable,autoBullet:a.AutoBullet,autoLink:r.AutoLink,unlinkWhenBackspaceAfterLink:r.UnlinkWhenBackspaceAfterLink,defaultShortcut:o.DefaultShortcut,smartOrderedList:a.getSmartOrderedList(e.smartOrderedListStyles)};return Object.keys(t).filter(function(t){return e[t]}).map(function(e){return t[e]})},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(6),o=n(3),s=/[.+=\s:;"',>]+$/i,a=5;function u(e,t){return 0==e.eventType||6==e.eventType&&"Paste"==e.source?o.cacheGetEventData(e,"LINK_DATA",function(){var n=6==e.eventType&&"Paste"==e.source&&e.data,r=i.matchLink((n.text||"").trim());if(r)return r;var u=o.cacheGetContentSearcher(e,t),l=u&&u.getWordBefore();if(l&&l.length>a){var c=(l.match(s)||[])[0]||"",f=l.substring(0,l.length-c.length);return["()","{}","[]"].forEach(function(e){f[f.length-1]==e[1]&&f.indexOf(e[0])<0&&(f=f.substr(0,f.length-1))}),i.matchLink(f)}return null}):null}t.AutoLink={keys:[13,32,2048],initialize:function(e){return i.Browser.isIE&&e.getDocument().execCommand("AutoUrlDetect",!1,!1)},shouldHandleEvent:u,handleEvent:function(e,t){var n=o.cacheGetContentSearcher(e,t),i=t.getDocument().createElement("a"),s=u(e,t);i.textContent=s.originalUrl,i.href=s.normalizedUrl,t.runAsync(function(){t.performAutoComplete(function(){return r.replaceWithNode(t,s.originalUrl,i,!1,n),o.clearContentSearcherCache(e),i},"AutoLink")})}},t.UnlinkWhenBackspaceAfterLink={keys:[8],shouldHandleEvent:function(e,t){return o.cacheGetContentSearcher(e,t).getInlineElementBefore()instanceof i.LinkInlineElement},handleEvent:function(e,t){e.rawEvent.preventDefault(),r.removeLink(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=n(0);t.FONT_SIZES=[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72];var o=1,s=1e3;function a(e,t,n){e=1==t?Math.floor(e):Math.ceil(e);var i=n[n.length-1];if(e<=n[0])e=Math.max(e+t,o);else if(e>i||e==i&&1==t)e/=10,e=1==t?Math.floor(e):Math.ceil(e),e=Math.min(Math.max(10*(e+t),i),s);else if(1==t){for(var r=0;r<n.length;r++)if(e<n[r]){e=n[r];break}}else for(r=n.length-1;r>=0;r--)if(e>n[r]){e=n[r];break}return e}t.default=function(e,n,o){void 0===o&&(o=t.FONT_SIZES);var s=0==n?1:-1;i.default(e,function(e){var t=parseFloat(r.getComputedStyle(e,"font-size"));e.style.fontSize=a(t,s,o)+"pt","normal"!=r.getComputedStyle(e,"line-height")&&(e.style.lineHeight="normal")})},t.getNewFontSize=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46),r=n(0);function o(e,t){return e.indexOf(r.getTagOfNode(t))<0}t.TAGS_TO_UNWRAP="B,I,U,STRONG,EM,SUB,SUP,STRIKE,FONT,CENTER,H1,H2,H3,H4,H5,H6,UL,OL,LI,SPAN,P,BLOCKQUOTE,CODE,S,PRE".split(","),t.TAGS_TO_STOP_UNWRAP=["TD","TH","TR","TABLE","TBODY","THEAD"],t.ATTRIBUTES_TO_PRESERVE=["href"],t.default=function(e,n,s,a){void 0===n&&(n=t.TAGS_TO_UNWRAP),void 0===s&&(s=t.TAGS_TO_STOP_UNWRAP),void 0===a&&(a=t.ATTRIBUTES_TO_PRESERVE),e.focus(),e.addUndoSnapshot(function(t,u){var l=[{}],c=s.join(",");i.default(e,function(t){var n=l[l.length-1],i=e.getElementAtCursor(c,t);i!=n.td&&n.first&&l.push(n={}),n.td=i,n.first=n.first||t,n.last=t}),l.filter(function(e){return e.first}).forEach(function(t){var i=e.collapseNodes(t.first,t.last,!0);if(o(s,i[0]))for(;e.contains(i[0].parentNode)&&o(s,i[0].parentNode);)i=[r.splitBalancedNodeRange(i)];if(i.forEach(function(e){return function e(t,n,i,s){if(1!=t.nodeType||"BR"==r.getTagOfNode(t))return!1;var a=[].slice.call(t.childNodes).map(function(t){return e(t,n,i,s)}).reduce(function(e,t){return e&&t},!0);if(!o(i,t))return!1;var u=r.isBlockElement(t);return n.indexOf(r.getTagOfNode(t))>=0||a?(u&&!a&&r.wrap(t),r.unwrap(t)):function(e,t){for(var n=0,i=[].slice.call(e.attributes);n<i.length;n++){var r=i[n];t.indexOf(r.name.toLowerCase())<0&&e.removeAttribute(r.name)}}(t,s),u}(e,n,s,a)}),t.td){var u=t.td.getAttribute("style")||"",l=u.split(";");(u=(l=l.filter(function(e){return 0==e.trim().toLowerCase().indexOf("border")})).join(";"))?t.td.setAttribute("style",u):t.td.removeAttribute("style")}}),e.select(t,u)},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=n(47),o=n(48),s=n(49),a=n(50),u=n(51),l=n(52),c=n(53),f=["font","text-decoration","color","background"];t.default=function(e){e.focus(),e.addUndoSnapshot(function(){i.default(e,"removeFormat"),e.queryElements("[class]",1,function(e){return e.removeAttribute("class")});var t=e.getDefaultFormat(),n=0===Object.keys(t).length;e.queryElements("[style]",2,function(e){f.forEach(function(t){return e.style.removeProperty(t)}),n&&""===e.getAttribute("style")&&e.removeAttribute("style")}),n||(t.fontFamily&&o.default(e,t.fontFamily),t.fontSize&&s.default(e,t.fontSize),t.textColor&&a.default(e,t.textColor),t.backgroundColor&&r.default(e,t.backgroundColor),t.bold&&u.default(e),t.italic&&l.default(e),t.underline&&c.default(e))},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=/^[a-zA-Z]+:/i,o=/^[\w.%+-]+@/i,s=/^ftp\./i,a="istemptitle";function u(e){return e.queryElements("a[href]",1)[0]}function l(e,t){t&&e.textContent!=t&&(e.textContent=t)}t.default=function(e,t,n,c){e.focus();var f=t?t.trim():"";if(f){var d=i.matchLink(f),p=d?d.normalizedUrl:function(e){if(!e)return e;var t="";return e.search(r)<0&&(t=0==e.search(o)?"mailto:":0==e.search(s)?"ftp://":"http://"),t+e}(f),h=d?d.originalUrl:f;e.addUndoSnapshot(function(){var t=e.getSelectionRange(),i=null;return t&&t.collapsed?(i=u(e))?(i.href=p,l(i,c)):((i=e.getDocument().createElement("A")).textContent=c||h,i.href=p,e.insertNode(i)):(e.getDocument().execCommand("createLink",!1,p),l(i=u(e),c)),n&&i&&(i.removeAttribute(a),i.title=n),i},"CreateLink")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(0);t.default=function(e,t){var n=e.getSelectionRange(),o=n&&r.Position.getStart(n).normalize().node,s=o?r.getComputedStyles(o):[],a=r.getTagOfNode(i.cacheGetElementAtCursor(e,t,"OL,UL")),u=r.getTagOfNode(i.cacheGetElementAtCursor(e,t,"H1,H2,H3,H4,H5,H6")),l=e.getDocument();return{fontName:s[0],fontSize:s[1],textColor:s[2],backgroundColor:s[3],isBold:l.queryCommandState("bold"),isItalic:l.queryCommandState("italic"),isUnderline:l.queryCommandState("underline"),isStrikeThrough:l.queryCommandState("strikeThrough"),isSubscript:l.queryCommandState("subscript"),isSuperscript:l.queryCommandState("superscript"),isBullet:"UL"==a,isNumbering:"OL"==a,headerLevel:u&&parseInt(u[1])||0,canUnlink:!!e.queryElements("a[href]",1)[0],canAddImageAltText:!!e.queryElements("img",1)[0],isBlockQuote:!!e.queryElements("blockquote",1)[0],canUndo:e.canUndo(),canRedo:e.canRedo()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(91),r=n(0),o=n(0),s=function(){function e(e,t){void 0===t&&(t={});var n=this;if("DIV"!=o.getTagOfNode(e))throw new Error("contentDiv must be an HTML DIV element");if(this.core=i.default(e,t),this.core.plugins.forEach(function(e){return e.initialize(n)}),this.setContent(t.initialContent||e.innerHTML||""),this.eventDisposers=[this.core.api.attachDomEvent(this.core,"keypress",1),this.core.api.attachDomEvent(this.core,"keydown",0),this.core.api.attachDomEvent(this.core,"keyup",2),this.core.api.attachDomEvent(this.core,"mousedown",4),this.core.api.attachDomEvent(this.core,r.Browser.isIE?"textinput":"input",11)],t.additionalEditFeatures&&t.additionalEditFeatures.forEach(function(e){return n.addContentEditFeature(e)}),!t.omitContentEditableAttributeChanges&&!e.isContentEditable){e.setAttribute("contenteditable","true");var s=e.style;s.userSelect=s.msUserSelect=s.webkitUserSelect="text",this.contenteditableChanged=!0}try{this.core.document.execCommand("enableObjectResizing",!1,!1),this.core.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}this.triggerEvent({eventType:9},!0),this.core.corePlugins.typeInContainer.ensureTypeInElement(new o.Position(e,0))}return e.prototype.dispose=function(){this.triggerEvent({eventType:10},!0),this.core.plugins.forEach(function(e){return e.dispose()}),this.eventDisposers.forEach(function(e){return e()}),this.eventDisposers=null;for(var e=0,t=Object.keys(this.core.customData);e<t.length;e++){var n=t[e],i=this.core.customData[n];i&&i.disposer&&i.disposer(i.value),delete this.core.customData[n]}if(this.contenteditableChanged){var r=this.core.contentDiv.style;r.userSelect=r.msUserSelect=r.webkitUserSelect="",this.core.contentDiv.removeAttribute("contenteditable")}this.core=null},e.prototype.isDisposed=function(){return!this.core},e.prototype.insertNode=function(e,t){return!!e&&this.core.api.insertNode(this.core,e,t)},e.prototype.deleteNode=function(e){return!(!e||!this.contains(e))&&(e.parentNode.removeChild(e),!0)},e.prototype.replaceNode=function(e,t){return!!(e&&t&&this.contains(e))&&(e.parentNode.replaceChild(t,e),!0)},e.prototype.getInlineElementAtNode=function(e){return o.getInlineElementAtNode(this.core.contentDiv,e)},e.prototype.getBlockElementAtNode=function(e){return o.getBlockElementAtNode(this.core.contentDiv,e)},e.prototype.contains=function(e){return o.contains(this.core.contentDiv,e)},e.prototype.queryElements=function(e,t,n){void 0===t&&(t=0);var i=t instanceof Function?0:t;n=t instanceof Function?t:n;var r=0==i?null:this.getSelectionRange();return o.queryElements(this.core.contentDiv,e,n,i,r)},e.prototype.collapseNodes=function(e,t,n){return o.collapseNodes(this.core.contentDiv,e,t,n)},e.prototype.isEmpty=function(e){return o.isNodeEmpty(this.core.contentDiv,e)},e.prototype.getContent=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);var n,i=this.core.contentDiv,o=i.innerHTML;if(t&&(n=r.getSelectionPath(i,this.getSelectionRange()))&&(o+="\x3c!--"+JSON.stringify(n)+"--\x3e"),e){var s={eventType:7,content:o};this.triggerEvent(s,!0),o=s.content}return o},e.prototype.getTextContent=function(){return this.core.contentDiv.innerText},e.prototype.setContent=function(e,t){void 0===t&&(t=!0);var n=this.core.contentDiv;if(n.innerHTML!=e){n.innerHTML=e||"";var i=n.lastChild;if(i&&8==i.nodeType)try{var o=JSON.parse(i.nodeValue);this.deleteNode(i);var s=r.getRangeFromSelectionPath(n,o);this.select(s)}catch(e){}t&&this.triggerContentChangedEvent()}},e.prototype.insertContent=function(e,t){if(e){var n=o.fromHtml(e,this.core.document);t&&t.insertOnNewLine&&n.length>0&&(n=[o.wrap(n)]);for(var i=0;i<n.length;i++)this.insertNode(n[i],t)}},e.prototype.getSelectionRange=function(){return this.core.api.getSelectionRange(this.core,!0)},e.prototype.hasFocus=function(){return this.core.api.hasFocus(this.core)},e.prototype.focus=function(){this.core.api.focus(this.core)},e.prototype.select=function(e,t,n,i){return this.core.api.select(this.core,e,t,n,i)},e.prototype.getSelection=function(){return this.core.document.defaultView.getSelection()},e.prototype.saveSelectionRange=function(){this.core.cachedSelectionRange=this.core.api.getSelectionRange(this.core,!1)},e.prototype.restoreSavedRange=function(){this.select(this.core.cachedSelectionRange),this.core.cachedSelectionRange=null},e.prototype.getFocusedPosition=function(){var e=this.getSelection();if(this.contains(e&&e.focusNode))return new o.Position(e.focusNode,e.focusOffset);var t=this.getSelectionRange();return t?o.Position.getStart(t):null},e.prototype.getCursorRect=function(){var e=this.getFocusedPosition();return e&&o.getPositionRect(e)},e.prototype.getElementAtCursor=function(e,t){if(!t){var n=this.getFocusedPosition();t=n&&n.node}return t&&o.findClosestElementAncestor(t,this.core.contentDiv,e)},e.prototype.addDomEventHandler=function(e,t){var n=this;if(e instanceof Object){var i=Object.keys(e).map(function(t){return e[t]&&n.core.api.attachDomEvent(n.core,t,null,e[t])}).filter(function(e){return e});return function(){return i.forEach(function(e){return e()})}}return this.core.api.attachDomEvent(this.core,e,null,t)},e.prototype.triggerEvent=function(e,t){void 0===t&&(t=!0),this.core.api.triggerEvent(this.core,e,t)},e.prototype.triggerContentChangedEvent=function(e,t){void 0===e&&(e="SetContent"),this.triggerEvent({eventType:6,source:e,data:t})},e.prototype.undo=function(){this.focus(),this.core.corePlugins.undo.undo()},e.prototype.redo=function(){this.focus(),this.core.corePlugins.undo.redo()},e.prototype.addUndoSnapshot=function(e,t){this.core.api.editWithUndo(this.core,e,t)},e.prototype.performAutoComplete=function(e,t){this.core.corePlugins.edit.performAutoComplete(e,t)},e.prototype.canUndo=function(){return this.core.corePlugins.undo.canUndo()},e.prototype.canRedo=function(){return this.core.corePlugins.undo.canRedo()},e.prototype.getDocument=function(){return this.core.document},e.prototype.getCustomData=function(e,t,n){return this.core.api.getCustomData(this.core,e,t,n)},e.prototype.isInIME=function(){return this.core.corePlugins.domEvent.isInIME()},e.prototype.getDefaultFormat=function(){return this.core.defaultFormat},e.prototype.getBodyTraverser=function(){return o.ContentTraverser.createBodyTraverser(this.core.contentDiv)},e.prototype.getSelectionTraverser=function(){return this.getSelectionRange()&&o.ContentTraverser.createSelectionTraverser(this.core.contentDiv,this.getSelectionRange())},e.prototype.getBlockTraverser=function(e){void 0===e&&(e=2);var t=this.getSelectionRange();return t&&o.ContentTraverser.createBlockTraverser(this.core.contentDiv,t,e)},e.prototype.getContentSearcherOfCursor=function(){var e=this.getSelectionRange();return e&&new o.PositionContentSearcher(this.core.contentDiv,o.Position.getStart(e))},e.prototype.runAsync=function(e){var t=this;(this.core.contentDiv.ownerDocument.defaultView||window).requestAnimationFrame(function(){!t.isDisposed()&&e&&e()})},e.prototype.setEditorDomAttribute=function(e,t){null===t?this.core.contentDiv.removeAttribute(e):this.core.contentDiv.setAttribute(e,t)},e.prototype.addContentEditFeature=function(e){this.core.corePlugins.edit.addFeature(e)},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(92),r=n(54),o=n(55),s=n(93),a=n(56),u=n(94),l=n(95),c=n(96),f=n(59),d=n(97),p=n(60),h=n(98),v=n(99),g=n(61),m=n(62),y=n(0);function E(e,t){if(t&&0===Object.keys(t).length)return{};t=t||{};var n=y.getComputedStyles(e);return{fontFamily:t.fontFamily||n[0],fontSize:t.fontSize||n[1],textColor:t.textColor||n[2],backgroundColor:t.backgroundColor||"",bold:t.bold,italic:t.italic,underline:t.underline}}function b(e){return{attachDomEvent:(e=e||{}).attachDomEvent||i.default,editWithUndo:e.editWithUndo||s.default,focus:e.focus||u.default,getCustomData:e.getCustomData||l.default,getSelectionRange:e.getSelectionRange||c.default,hasFocus:e.hasFocus||f.default,insertNode:e.insertNode||d.default,select:e.select||h.default,triggerEvent:e.triggerEvent||v.default}}t.default=function(e,t){var n={undo:t.undo||new m.default,edit:new o.default,typeInContainer:new g.default,mouseUp:new p.default,domEvent:new r.default(t.disableRestoreSelectionOnFocus),firefoxTypeAfterLink:y.Browser.isFirefox&&new a.default},i=[n.typeInContainer,n.edit,n.mouseUp].concat(t.plugins||[],[n.firefoxTypeAfterLink,n.undo,n.domEvent]).filter(function(e){return!!e}),s=i.filter(function(e){return e.onPluginEvent||e.willHandleEventExclusively});return{contentDiv:e,document:e.ownerDocument,defaultFormat:E(e,t.defaultFormat),corePlugins:n,currentUndoSnapshot:null,customData:{},cachedSelectionRange:null,plugins:i,eventHandlerPlugins:s,api:b(t.coreApiOverride),defaultApi:b()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,i){var r=function(t){i&&i(t),null!=n&&e.api.triggerEvent(e,{eventType:n,rawEvent:t},!1)};return e.contentDiv.addEventListener(t,r),function(){e.contentDiv.removeEventListener(t,r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e,t,n){var r,o=null!==e.currentUndoSnapshot;o||(e.currentUndoSnapshot=e.corePlugins.undo.addUndoSnapshot());try{if(t){var s=e.api.getSelectionRange(e,!0);r=t(s&&i.Position.getStart(s).normalize(),s&&i.Position.getEnd(s).normalize(),e.currentUndoSnapshot),o||e.corePlugins.undo.addUndoSnapshot()}}finally{o||(e.currentUndoSnapshot=null)}if(t&&n){var a={eventType:6,source:n,data:r};e.api.triggerEvent(e,a,!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){if(!(e.api.hasFocus(e)&&e.api.getSelectionRange(e,!1)||e.cachedSelectionRange&&e.api.select(e,e.cachedSelectionRange))){var t=i.getFirstLeafNode(e.contentDiv)||e.contentDiv;e.api.select(e,t,0)}e.cachedSelectionRange=null,e.api.hasFocus(e)||e.contentDiv.focus()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,i){return(e.customData[t]=e.customData[t]||{value:n(),disposer:i}).value}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e,t){var n=null;if(!t||e.api.hasFocus(e)){var r=e.document.defaultView.getSelection();if(r&&r.rangeCount>0){var o=r.getRangeAt(0);i.contains(e.contentDiv,o)&&(n=o)}}return!n&&t&&(n=e.cachedSelectionRange),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e,t,n){var r=n?n.position:2,o=!n||n.updateCursor,s=!n||n.replaceSelection,a=!!n&&n.insertOnNewLine,u=e.contentDiv;switch(o&&e.api.focus(e),r){case 0:case 1:var l=0==r,c=i.getFirstLastBlockElement(u,l),f=void 0;if(c){var d=l?c.getStartNode():c.getEndNode();f=a||3==d.nodeType||i.isVoidHtmlElement(d)?d.parentNode.insertBefore(t,l?d:d.nextSibling):d.insertBefore(t,l?d.firstChild:null)}else f=u.appendChild(t);f&&a&&!i.isBlockElement(f)&&i.wrap(f);break;case 2:var p=e.api.getSelectionRange(e,!0);if(!p)return;s&&!p.collapsed&&p.deleteContents();var h=p.cloneRange(),v=i.Position.getStart(p),g=void 0;v=a&&(g=i.getBlockElementAtNode(u,v.normalize().node))?new i.Position(g.getEndNode(),-3):i.adjustNodeInsertPosition(u,t,v);var m=11==t.nodeType?t.lastChild:t;(p=i.createRange(v)).insertNode(t),o&&m?e.api.select(e,new i.Position(m,-3).normalize()):e.api.select(e,h);break;case 3:e.contentDiv.parentNode.insertBefore(t,u.nextSibling)}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(59),r=n(0);t.default=function(e,t,n,o,s){var a;if(!t)return!1;if(t instanceof Range)a=t;else if(t.node)a=r.createRange(new r.Position(t),n&&n.node?new r.Position(n):null);else if(t instanceof Node){var u=void 0,l=void 0;null==n?(u=new r.Position(t,-2),l=new r.Position(t,-3)):(u=new r.Position(t,n),l=o instanceof Node?new r.Position(o,s):null),a=r.createRange(u,l)}if(r.contains(e.contentDiv,a)){var c=e.document.defaultView.getSelection();if(c){var f=!0;if(c.rangeCount>0)try{var d=r.Browser.isEdge&&1==c.rangeCount?c.getRangeAt(0):null;d&&d.startContainer==a.startContainer&&d.startOffset==a.startOffset&&d.endContainer==a.endContainer&&d.endOffset==a.endOffset?f=!1:c.removeAllRanges()}catch(e){}return f&&c.addRange(a),i.default(e)||(e.cachedSelectionRange=a),!0}}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){!n&&e.eventHandlerPlugins.some(function(e){return function(e,t){return!!(t.onPluginEvent&&t.willHandleEventExclusively&&t.willHandleEventExclusively(e))&&(t.onPluginEvent(e),!0)}(t,e)})||e.eventHandlerPlugins.forEach(function(e){e.onPluginEvent&&e.onPluginEvent(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=1e7,r=function(){function e(e){void 0===e&&(e=i),this.maxSize=e,this.snapshots=[],this.totalSize=0,this.currentIndex=-1}return e.prototype.canMove=function(e){var t=this.currentIndex+e;return t>=0&&t<this.snapshots.length},e.prototype.move=function(e){return this.canMove(e)?(this.currentIndex+=e,this.snapshots[this.currentIndex]):null},e.prototype.addSnapshot=function(e){if(this.currentIndex<0||e!=this.snapshots[this.currentIndex]){this.clearRedo(),this.snapshots.push(e),this.currentIndex++,this.totalSize+=e.length;for(var t=0;t<this.snapshots.length&&this.totalSize>this.maxSize;)this.totalSize-=this.snapshots[t].length,t++;t>0&&(this.snapshots.splice(0,t),this.currentIndex-=t)}},e.prototype.clearRedo=function(){if(this.canMove(1)){for(var e=0,t=this.currentIndex+1;t<this.snapshots.length;t++)e+=this.snapshots[t].length;this.snapshots.splice(this.currentIndex+1),this.totalSize-=e}},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),r="GET_ELEMENT_AT_CURSOR_";t.default=function(e,t,n){return i.default(t,r+n,function(){return e.getElementAtCursor(n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new FileReader;n.onload=function(t){e.isDisposed()||e.addUndoSnapshot(function(){var n=e.getDocument().createElement("img");n.src=t.target.result,n.style.maxWidth="100%",e.insertNode(n)},"Format")},n.readAsDataURL(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function r(e){return e<=4?"120px":e<=6?"100px":"70px"}t.default=function(e,t,n,o){var s=e.getDocument(),a=s.createDocumentFragment(),u=s.createElement("table");a.appendChild(u),u.cellSpacing="0",u.cellPadding="1";for(var l=0;l<n;l++){var c=s.createElement("tr");u.appendChild(c);for(var f=0;f<t;f++){var d=s.createElement("td");c.appendChild(d),d.appendChild(s.createElement("br")),d.style.width=r(t)}}e.focus(),e.addUndoSnapshot(function(){var t=new i.VTable(u);t.applyFormat(o||{bgColorEven:"#FFF",bgColorOdd:"#FFF",topBorderColor:"#ABABAB",bottomBorderColor:"#ABABAB",verticalBorderColor:"#ABABAB"}),t.writeBack(),e.insertNode(a),e.runAsync(function(){return e.select(new i.Position(u,0).normalize())})},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e,t){var n=e.getElementAtCursor("TD,TH");n&&e.addUndoSnapshot(function(r,o){var s=new i.VTable(n);s.edit(t),s.writeBack(),e.focus(),e.select(r,o)||e.select(e.contains(n)?n:s.getCurrentTd())},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e,t,n){(n=n||e.getElementAtCursor("TABLE"))&&e.addUndoSnapshot(function(r,o){var s=new i.VTable(n);s.applyFormat(t),s.writeBack(),e.focus(),e.select(r,o)},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){e.focus(),e.addUndoSnapshot(function(t,n){e.queryElements("a[href]",1,i.unwrap),e.select(t,n)},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r){if(!t||!n)return!1;var o;if(o="string"==typeof t?(r=r||e.getContentSearcherOfCursor())&&r.getRangeFromText(t,i):t){var s=e.getSelectionRange();return s.collapsed&&o.endContainer==s.startContainer&&o.endOffset==s.startOffset&&(i=!0),o.deleteContents(),o.insertNode(n),i?e.select(n,-3):e.select(s),!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e,t){var n="justifyLeft",r="left";1==t?(n="justifyCenter",r="center"):2==t&&(n="justifyRight",r="right"),e.addUndoSnapshot(function(){i.default(e,n),e.queryElements("[align]",1,function(e){return e.style.textAlign=r})},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46);t.default=function(e,t){e.focus(),e.addUndoSnapshot(function(n,r){i.default(e,function(e){e.setAttribute("dir",0==t?"ltr":"rtl"),e.style.textAlign=0==t?"left":"right"}),e.select(n,r)},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.focus(),e.addUndoSnapshot(function(){e.queryElements("img",1,function(e){return e.setAttribute("alt",t)})},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28);t.default=function(e,t){var n=0==t?"indent":"outdent";e.addUndoSnapshot(function(){var t;return e.focus(),e.getElementAtCursor("OL,UL")?t=i.default(e,n):(e.getDocument().execCommand(n,!1,null),e.queryElements("BLOCKQUOTE",1,function(e){t=t||e,e.style.marginTop="0px",e.style.marginBottom="0px"})),t},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28);t.default=function(e){e.focus(),e.addUndoSnapshot(function(){return i.default(e,"insertUnorderedList")},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28);t.default=function(e){e.focus(),e.addUndoSnapshot(function(){return i.default(e,"insertOrderedList")},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(63),r="blockquote",o=function(e){e.style.borderLeft="3px solid",e.style.borderColor="#C8C8C8",e.style.paddingLeft="10px",e.style.color="#666666"};t.default=function(e,t){i.default(e,r,t||o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(63),r=n(0),o="pre",s="code",a="CODE";function u(e){var t=r.wrap(e,s);return r.wrap(t,o)}function l(e){if(!e)return null;var t=e.childNodes[0];return 1==e.childNodes.length&&r.getTagOfNode(t)==a&&r.unwrap(t),r.unwrap(e)}t.default=function(e,t){i.default(e,o,t,u,l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e){i.default(e,"strikeThrough")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e){i.default(e,"subscript")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.default=function(e){i.default(e,"superscript")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e,t){t=Math.min(Math.max(Math.round(t),0),6),e.addUndoSnapshot(function(){e.focus();var n=!1;if(e.queryElements("H1,H2,H3,H4,H5,H6",1,function(t){n||(e.getDocument().execCommand("formatBlock",!1,"<DIV>"),n=!0);for(var i=e.getDocument().createElement("div");t.firstChild;)i.appendChild(t.firstChild);e.replaceNode(t,i)}),t>0){for(var r=e.getSelectionTraverser(),o=r?r.currentInlineElement:null;o;){var s=i.findClosestElementAncestor(o.getContainerNode());s&&(s.style.fontSize=""),o=r.getNextInlineElement()}e.getDocument().execCommand("formatBlock",!1,"<H"+t+">")}},"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6);function s(e,t,n){return{winKey:e,macKey:t,action:n}}var a=[s(322,578,o.toggleBold),s(329,585,o.toggleItalic),s(341,597,o.toggleUnderline),s(346,602,function(e){return e.undo()}),s(345,1626,function(e){return e.redo()}),s(446,702,o.toggleBullet),s(447,703,o.toggleNumbering),s(1470,1726,function(e){return o.changeFontSize(e,0)}),s(1468,1724,function(e){return o.changeFontSize(e,1)})];function u(e){return r.cacheGetEventData(e,"DEFAULT_SHORT_COMMAND",function(){var t=e.rawEvent,n=0!=e.eventType||t.altKey?0:t.which|(t.metaKey&&512)|(t.shiftKey&&1024)|(t.ctrlKey&&256);return n&&a.filter(function(e){return(i.Browser.isMac?e.macKey:e.winKey)==n})[0]})}t.DefaultShortcut={allowFunctionKeys:!0,keys:[66,73,85,89,90,188,190,191],shouldHandleEvent:u,handleEvent:function(e,t){var n=u(e);n&&(n.action(t),e.rawEvent.preventDefault(),e.rawEvent.stopPropagation())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(0);function o(e,t){return i.cacheGetEventData(e,"TABLECELL_FOR_TABLE_FEATURES",function(){var e=t.getFocusedPosition(),n=t.getElementAtCursor("TD,TH,LI",e.node);return"LI"==r.getTagOfNode(n)?null:n})}t.TabInTable={keys:[9],shouldHandleEvent:o,handleEvent:function(e,t){for(var n=e.rawEvent.shiftKey,i=o(e,t),s=new r.VTable(i),a=n?-1:1,u=s.row,l=s.col+a;;l+=a){if(l<0||l>=s.cells[u].length){if((u+=a)<0||u>=s.cells.length){t.select(s.table,n?-2:-3);break}l=n?s.cells[u].length-1:0}var c=s.getCell(u,l);if(c.td){t.select(c.td,0);break}}e.rawEvent.preventDefault()}},t.UpDownInTable={keys:[38,40],shouldHandleEvent:o,handleEvent:function(e,t){for(var n=o(e,t),i=new r.VTable(n),s=38==e.rawEvent.which,a=s?-1:1,u=null,l=e.rawEvent.shiftKey,c=t.getSelection(),f=c.anchorNode,d=c.anchorOffset,p=i.row;p>=0&&p<i.cells.length;p+=a){var h=i.getCell(p,i.col);if(h.td&&h.td!=n){u=h.td;break}}t.runAsync(function(){var e=t.getElementAtCursor();if(r.contains(i.table,e)&&!r.contains(n,e,!0)){var o=u?new r.Position(u,0):new r.Position(i.table,s?-2:-3);l?(o=1==o.node.nodeType&&r.isVoidHtmlElement(o.node)?new r.Position(o.node,o.isAtEnd?-3:-2):o,t.getSelection().setBaseAndExtent(f,d,o.node,o.offset)):t.select(o)}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(3),o=n(0);function s(e,t){var n=a(e,t);if(n){var r=n[0],s=o.getTagOfNode(r);"UL"==s?i.toggleBullet(t):"OL"==s&&i.toggleNumbering(t),t.focus(),e.rawEvent.preventDefault()}}function a(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI,TABLE"),i=n&&"LI"==o.getTagOfNode(n)&&t.getElementAtCursor("UL,OL",n);return i?[i,n]:null}t.IndentWhenTab={keys:[9],shouldHandleEvent:function(e,t){return!e.rawEvent.shiftKey&&a(e,t)},handleEvent:function(e,t){i.setIndentation(t,0),e.rawEvent.preventDefault()}},t.OutdentWhenShiftTab={keys:[9],shouldHandleEvent:function(e,t){return e.rawEvent.shiftKey&&a(e,t)},handleEvent:function(e,t){i.setIndentation(t,1),e.rawEvent.preventDefault()}},t.MergeInNewLine={keys:[8],shouldHandleEvent:function(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI"),i=t.getSelectionRange();return n&&i&&o.isPositionAtBeginningOf(o.Position.getStart(i),n)},handleEvent:function(e,t){r.cacheGetElementAtCursor(t,e,"LI").previousSibling?t.runAsync(function(){var e=t.getDocument().createElement("BR");t.insertNode(e),t.select(e,-3)}):s(e,t)}},t.OutdentWhenBackOn1stEmptyLine={keys:[8],shouldHandleEvent:function(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI");return n&&o.isNodeEmpty(n)&&!n.previousSibling},handleEvent:s},t.OutdentWhenEnterOnEmptyLine={keys:[13],shouldHandleEvent:function(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI");return!e.rawEvent.shiftKey&&n&&o.isNodeEmpty(n)},handleEvent:function(e,t){t.performAutoComplete(function(){return s(e,t)})}},t.AutoBullet={keys:[32],shouldHandleEvent:function(e,t){if(!a(e,t)){var n=r.cacheGetContentSearcher(e,t),i=n.getSubStringBefore(3);return["*","-","1."].indexOf(i)>=0&&!n.getNearestNonTextInlineElement()}return!1},handleEvent:function(e,t){t.runAsync(function(){t.performAutoComplete(function(){var e=t.getContentSearcherOfCursor(),n=e.getSubStringBefore(3),r=e.getRangeFromText(n,!0);r&&r.deleteContents();var s=t.getDocument().createElement("BR");(o.Browser.isChrome||o.Browser.isSafari||o.Browser.isIE11OrGreater)&&t.insertNode(s),0==n.indexOf("1.")?i.toggleNumbering(t):i.toggleBullet(t),t.deleteNode(s)})})}},t.getSmartOrderedList=function(e){return{keys:[2048],shouldHandleEvent:function(e,t){return e.data instanceof HTMLOListElement},handleEvent:function(t,n){var i=t.data,r=n.getElementAtCursor("OL",i.parentNode);if(r){var o=e&&e.length>0?e:["decimal"];i.style.listStyle=o[(o.indexOf(r.style.listStyle)+1)%o.length]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(0),o="BLOCKQUOTE",s=[o,"LI","TD","TH"].join(",");function a(e,t){return i.cacheGetEventData(e,"QUOTE_CHILD",function(){var e=t.getElementAtCursor(s);if(e&&r.getTagOfNode(e)==o){var n=t.getFocusedPosition(),i=n&&t.getBlockElementAtNode(n.normalize().node);if(i){var a=i.getStartNode()==e?i.getStartNode():i.collapseToSingleElement();return r.isNodeEmpty(a)?a:null}}return null})}function u(e,t){t.addUndoSnapshot(function(){var n,i=a(e,t);r.getTagOfNode(i)==o&&(i=r.wrap([].slice.call(i.childNodes))),n=r.splitBalancedNodeRange(i),r.unwrap(n),t.select(i,0)}),e.rawEvent.preventDefault()}t.UnquoteWhenBackOnEmpty1stLine={keys:[8],shouldHandleEvent:function(e,t){var n=a(e,t);return n&&r.isNodeEmpty(n)&&!n.previousSibling},handleEvent:u},t.UnquoteWhenEnterOnEmptyLine={keys:[13],shouldHandleEvent:function(e,t){var n=a(e,t);return!e.rawEvent.shiftKey&&n&&r.isNodeEmpty(n)},handleEvent:function(e,t){return t.performAutoComplete(function(){return u(e,t)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(125),r=n(126),o=n(134),s=n(6),a=n(6),u=n(13),l=n(0),c=function(){function e(e,t){var n=this;this.onPaste=function(e){i.default(e,n.editor,function(e){n.pasteOriginal({snapshotBeforePaste:null,originalFormat:n.getCurrentFormat(),types:e.types,image:e.image,text:e.text,rawHtml:e.html,html:e.html?n.sanitizeHtml(e.html):o.default(e.text)})})},this.sanitizer=new u.HtmlSanitizer({attributeCallbacks:t})}return e.prototype.getName=function(){return"Paste"},e.prototype.initialize=function(e){this.editor=e,this.pasteDisposer=e.addDomEventHandler("paste",this.onPaste)},e.prototype.dispose=function(){this.pasteDisposer(),this.pasteDisposer=null,this.editor=null},e.prototype.pasteOriginal=function(e){this.paste(e,this.detectPasteOption(e))},e.prototype.pasteText=function(e){this.paste(e,1)},e.prototype.pasteAndMergeFormat=function(e){this.paste(e,this.detectPasteOption(e),!0)},e.prototype.detectPasteOption=function(e){return e.text||!e.image?0:2},e.prototype.paste=function(e,t,n){var i=this.editor.getDocument(),r=i.createDocumentFragment();if(0==t)for(var o=e.html,s=0,a=l.fromHtml(o,i);s<a.length;s++){var u=a[s];n&&this.applyTextFormat(u,e.originalFormat),r.appendChild(u)}var c={eventType:8,clipboardData:e,fragment:r,pasteOption:t};this.editor.triggerEvent(c,!0),this.internalPaste(c)},e.prototype.internalPaste=function(e){var t=this,n=e.clipboardData,i=e.fragment,r=e.pasteOption;this.editor.focus(),this.editor.addUndoSnapshot(function(){switch(null==n.snapshotBeforePaste?n.snapshotBeforePaste=t.editor.getContent(!1,!0):t.editor.setContent(n.snapshotBeforePaste),r){case 0:t.editor.insertNode(i);break;case 1:var e=o.default(n.text);t.editor.insertContent(e);break;case 2:a.insertImage(t.editor,n.image)}return n},"Paste")},e.prototype.applyTextFormat=function(e,t){for(var n=l.getFirstLeafNode(e),i=[];n;)3==n.nodeType&&n.parentNode&&i.indexOf(n.parentNode)<0&&i.push(n.parentNode),n=l.getNextLeafSibling(e,n);for(var r=0,o=i;r<o.length;r++){var s=o[r];l.applyFormat(s,t)}},e.prototype.getCurrentFormat=function(){var e=s.getFormatState(this.editor);return e?{fontFamily:e.fontName,fontSize:e.fontSize,textColor:e.textColor,backgroundColor:e.backgroundColor,bold:e.isBold,italic:e.isItalic,underline:e.isUnderline}:{}},e.prototype.sanitizeHtml=function(e){var t=u.htmlToDom(e,!0,r.default);if(t&&t.body){this.sanitizer.convertGlobalCssToInlineCss(t);var n=this.editor.getSelectionRange(),i=n&&l.Position.getStart(n).normalize().element,o=u.getInheritableStyles(i);return this.sanitizer.sanitize(t.body,o),t.body.innerHTML}return""},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r='<div contenteditable style="width: 1px; height: 1px; overflow: hidden; position: fixed; top: 0; left; 0; -webkit-user-select: text"></div>';t.default=function(e,t,n){i.extractClipboardEvent(e,function(e){void 0===e.html?function(e,t){var n=e.getSelectionRange(),o=function(e){var t=e.getCustomData("PasteDiv",function(){var t=i.fromHtml(r,e.getDocument())[0];return e.insertNode(t,{position:3,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),t},function(e){e.parentNode.removeChild(e)});return t.style.display="",t}(e);o.focus(),e.runAsync(function(){e.select(n),t(o.innerHTML),o.style.display="none",o.innerHTML=""})}(t,function(t){e.html=t,n(e)}):n(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(127),r=n(130),o=n(0),s=n(13),a="xmlns:w",u="urn:schemas-microsoft-com:office:word",l="xmlns:x",c="urn:schemas-microsoft-com:office:excel",f=/<\/\s*td\s*>((?!<\/\s*tr\s*>)[\s\S])*$/i,d=/<\/\s*tr\s*>((?!<\/\s*table\s*>)[\s\S])*$/i,p=/<tr[^>]*>[^<]*/i,h=/<table[^>]*>[^<]*/i;t.default=function(e,t){var n=s.splitWithFragment(t),v=n[0],g=n[1],m=e&&e.body&&e.querySelector("html");if("HTML"==o.getTagOfNode(m))if(m.getAttribute(a)==u)e.body.innerHTML=v,r.default(e);else if(m.getAttribute(l)==c){if(v.match(f)){var y=g.match(p);v=(y?y[0]:"<TR>")+v+"</TR>"}if(v.match(d)){var E=g.match(h);v=(E?E[0]:"<TABLE>")+v+"</TABLE>"}e.body.innerHTML=v,i.default(e)}else e.body.innerHTML=v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13);t.default=function(e){var t=new i.HtmlSanitizer({styleCallbacks:{border:function(e,t){return"none"!=e||"none"!=t.style.border}},additionalAllowAttributes:["class"]});t.sanitize(e.body);var n=e.createElement("style");e.body.appendChild(n),n.innerHTML="td {border: solid 1px #d4d4d4}",t.convertGlobalCssToInlineCss(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),r=n(65),o=n(66),s=n(129),a=function(){function e(e){e=e||{},this.elementCallbacks=i.default(e.elementCallbacks),this.styleCallbacks=s.getStyleCallbacks(e.styleCallbacks),this.attributeCallbacks=i.default(e.attributeCallbacks),this.allowedTags=s.getAllowedTags(e.additionalAllowedTags),this.allowedAttributes=s.getAllowedAttributes(e.additionalAllowAttributes),this.defaultStyleValues=s.getDefaultStyleValues(e.additionalDefaultStyleValues),this.additionalGlobalStyleNodes=e.additionalGlobalStyleNodes||[],this.allowPreserveWhiteSpace=e.allowPreserveWhiteSpace}return e.convertInlineCss=function(t,n){return new e({additionalGlobalStyleNodes:n}).exec(t,!0)},e.sanitizeHtml=function(t,n){var i=new e(n=n||{}),o=n.currentElementOrStyle instanceof HTMLElement?r.default(n.currentElementOrStyle):n.currentElementOrStyle;return i.exec(t,n.convertCssOnly,n.preserveFragmentOnly,o)},e.prototype.exec=function(e,t,n,i){var r=o.default(e,n);return r&&(this.convertGlobalCssToInlineCss(r),t||this.sanitize(r.body,i)),r&&r.body&&r.body.innerHTML||""},e.prototype.sanitize=function(e,t){if(!e)return"";t=i.default(t,r.default(null)),this.processNode(e,t,{})},e.prototype.convertGlobalCssToInlineCss=function(e){for(var t=u(e.querySelectorAll("style")),n=0,i=this.additionalGlobalStyleNodes.reverse().map(function(e){return e.sheet}).concat(t.map(function(e){return e.sheet}).reverse()).filter(function(e){return e});n<i.length;n++)for(var r=i[n],o=function(t){var n=r.cssRules[t],i=n&&n.style?n.style.cssText:null;if(n.type!=CSSRule.STYLE_RULE||!i||!n.selectorText)return"continue";for(var o=0,s=n.selectorText.split(",");o<s.length;o++){var a=s[o];if(a&&a.trim()&&!(a.indexOf(":")>=0))u(e.querySelectorAll(a)).forEach(function(e){return e.setAttribute("style",i+(e.getAttribute("style")||""))})}},s=r.cssRules.length-1;s>=0;s--)o(s);t.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})},e.prototype.processNode=function(e,t,n){var r=e.nodeType,o=r==Node.ELEMENT_NODE,s=r==Node.TEXT_NODE,a=e,u=o?a.tagName.toUpperCase():"";if(o&&!this.allowElement(a,u,n)||s&&/^[\r\n]*$/g.test(e.nodeValue)&&!t.insidePRE||!o&&!s)e.parentNode.removeChild(e);else if(s&&!this.allowPreserveWhiteSpace&&"pre"==t["white-space"])e.nodeValue=e.nodeValue.replace(/^ /gm,"Â ").replace(/ {2}/g," Â ");else if(o){var l=i.default(t);this.processAttributes(a,n),this.processCss(a,u,l,n),"PRE"==u&&(l.insidePRE="true");for(var c=a.firstChild,f=void 0;c;c=f)f=c.nextSibling,this.processNode(c,l,n)}},e.prototype.processCss=function(e,t,n,i){var r=this,o=e.getAttributeNode("style");if(o){var s=o.value.split(";"),a=s.filter(function(t){var o;if(!t||""==t.trim()||2!=(o=t.split(":")).length)return!1;var s=o[0].trim().toLowerCase(),a=o[1].trim().toLowerCase(),u=r.styleCallbacks[s],l=null!=n[s],c=(!u||u(a,e,i))&&"inherit"!=a&&a.indexOf("expression")<0&&"-"!=s.substr(0,1)&&r.defaultStyleValues[s]!=a&&(l&&a!=n[s]||!l&&"initial"!=a&&"normal"!=a);return c&&l&&(n[s]=a),c&&(r.allowPreserveWhiteSpace||"white-space"!=s)});s.length!=a.length&&(a.length>0?e.setAttribute("style",a.map(function(e){return e.trim()}).join("; ")):e.removeAttribute("style"))}},e.prototype.processAttributes=function(e,t){for(var n=e.attributes.length-1;n>=0;n--){var i=e.attributes[n],r=i.name.toLowerCase().trim(),o=i.value,s=this.attributeCallbacks[r];s?o=s(o,e,t):this.allowedAttributes.indexOf(r)<0&&(o=null),null==o||o.toLowerCase().indexOf("script:")>=0?e.removeAttribute(r):i.value=o}},e.prototype.allowElement=function(e,t,n){var i=this.elementCallbacks[t];return i?i(e,n):this.allowedTags.indexOf(t)>=0||t.indexOf(":")>0},e}();function u(e){return[].slice.call(e)}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),r="BODY,H1,H2,H3,H4,H5,H6,FORM,P,BR,NOBR,HR,ACRONYM,ABBR,ADDRESS,B,BDI,BDO,BIG,BLOCKQUOTE,CENTER,CITE,CODE,DEL,DFN,EM,FONT,I,INS,KBD,MARK,METER,PRE,PROGRESS,Q,RP,RT,RUBY,S,SAMP,SMALL,STRIKE,STRONG,SUB,SUP,TEMPLATE,TIME,TT,U,VAR,WBR,XMP,INPUT,TEXTAREA,BUTTON,SELECT,OPTGROUP,OPTION,LABEL,FIELDSET,LEGEND,DATALIST,OUTPUT,IMG,MAP,AREA,CANVAS,FIGCAPTION,FIGURE,PICTURE,A,NAV,UL,OL,LI,DIR,UL,DL,DT,DD,MENU,MENUITEM,TABLE,CAPTION,TH,TR,TD,THEAD,TBODY,TFOOT,COL,COLGROUP,DIV,SPAN,HEADER,FOOTER,MAIN,SECTION,ARTICLE,ASIDE,DETAILS,DIALOG,SUMMARY,DATA".split(","),o="accept,align,alt,checked,cite,color,cols,colspan,contextmenu,coords,datetime,default,dir,dirname,disabled,download,face,headers,height,hidden,high,href,hreflang,ismap,kind,label,lang,list,low,max,maxlength,media,min,multiple,open,optimum,pattern,placeholder,readonly,rel,required,reversed,rows,rowspan,scope,selected,shape,size,sizes,span,spellcheck,src,srclang,srcset,start,step,style,tabindex,target,title,translate,type,usemap,value,width,wrap".split(","),s={"background-color":"transparent","border-bottom-color":"rgb(0, 0, 0)","border-bottom-style":"none","border-bottom-width":"0px","border-image-outset":"0","border-image-repeat":"stretch","border-image-slice":"100%","border-image-source":"none","border-image-width":"1","border-left-color":"rgb(0, 0, 0)","border-left-style":"none","border-left-width":"0px","border-right-color":"rgb(0, 0, 0)","border-right-style":"none","border-right-width":"0px","border-top-color":"rgb(0, 0, 0)","border-top-style":"none","border-top-width":"0px","outline-color":"transparent","outline-style":"none","outline-width":"0px",overflow:"visible","text-decoration":"none","-webkit-text-stroke-width":"0px","word-wrap":"break-word","margin-left":"0px","margin-right":"0px",padding:"0px","padding-top":"0px","padding-left":"0px","padding-right":"0px","padding-bottom":"0px",border:"0px","border-top":"0px","border-left":"0px","border-right":"0px","border-bottom":"0px","vertical-align":"baseline",float:"none"};function a(){return null}function u(e,t){var n=t.tagName;return!("LI"==n||"DIV"==n)}function l(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})}t.getAllowedTags=function(e){return l(r.concat(e||[])).map(function(e){return e.toUpperCase()})},t.getAllowedAttributes=function(e){return l(o.concat(e||[])).map(function(e){return e.toLocaleLowerCase()})},t.getDefaultStyleValues=function(e){var t=i.default(s);return e&&Object.keys(e).forEach(function(n){var i=e[n];null!=i?t[n]=i:delete t[n]}),t},t.getStyleCallbacks=function(e){var t=i.default(e);return t.position=t.position||a,t.width=t.width||u,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(131),r=n(132),o=n(13),s=n(133);t.default=function(e){var t;new o.HtmlSanitizer({elementCallbacks:(t={},t["O:P"]=function(){return!1},t),additionalAllowAttributes:["class"]}).sanitize(e.body);var n=i.createWordConverter(),a=e.querySelectorAll("p");a.length>0&&(n.wordConverterArgs=r.createWordConverterArguments(a),s.processNodesDiscovery(n)&&s.processNodeConvert(n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(67);t.createWordConverter=function(){return{nextUniqueId:1,numBulletsConverted:0,numNumberedConverted:0,wordConverterArgs:null,customData:i.createCustomData()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(68);t.createWordConverterArguments=function(e){return{nodes:e,currentIndex:0,lists:{},listItems:[],currentListIdsByLevels:[i.createLevelLists()],lastProcessedItem:null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(68),r=n(67),o=n(0),s=5,a="UniqueListId",u="mso-list",l=/[\n|\r]/gi;function c(e,t,n,i){var s=function e(t,n,i){var r=null;var s;1==n?s=g(t):(r=e(t,n-1,null),s=r.lastChild);if(s&&1==s.nodeType){var a=o.getTagOfNode(s);if("UL"==a||"OL"==a)return s}var u=t.ownerDocument.createElement(i?i.tagName:"UL");1==n?t.parentNode.insertBefore(u,t):r.appendChild(u);return u}(t,n.level,i),u=r.getObject(e.customData,s,a);if(u&&u!=n.uniqueListId||!u&&s.firstChild){var l=t.ownerDocument.createElement(i.tagName);s.parentNode.insertBefore(l,s.nextSibling),s=l}return r.setObject(e.customData,s,a,n.uniqueListId),function(e,t,n){if(n.tagName!=o.getTagOfNode(t)){var i=t.ownerDocument.createElement(n.tagName);for(r.setObject(e.customData,i,a,r.getObject(e.customData,t,a));t.firstChild;)i.appendChild(t.firstChild);t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),t=i}return t}(e,s,i)}function f(e,t){for(var n=[],i=e.firstChild;i;i=i.nextSibling)1==i.nodeType&&t>1&&f(i,t-1),(E(i=v(i,!0))||y(i))&&n.push(i);n.forEach(function(t){return e.removeChild(t)})}function d(e){if(1==e.nodeType){var t=b(e,u);if(t&&t.length>0)try{var n=t.split(" ");if(3==n.length)return{level:parseInt(n[1].substr("level".length)),wordListId:t,originalNode:e,uniqueListId:0}}catch(e){}}return null}function p(e){return["o","Â·","Â§","-"].indexOf(e)>=0}function h(e,t){for(var n=null,i=e.firstChild;!n&&i;)y(i=v(i,!0))?0==(n=i.textContent.trim()).length&&(n="o"):1==i.nodeType&&t>1&&(n=h(i,t-1)),i=i.nextSibling;return n}function v(e,t){if(8==e.nodeType){var n=e.data;if(n&&"[if !supportlists]"==n.trim().toLowerCase()){for(var i=e,r=null,o=0;o<4&&(i=m(i));o++)if(8==i.nodeType&&(n=i.data)&&"[endif]"==n.trim().toLowerCase()){r=i;break}if(r){var s=e.ownerDocument.createElement("span");for(s.setAttribute("style","mso-list: ignore"),i=m(e);i!=r;)i=i.nextSibling,s.appendChild(i.previousSibling);r.parentNode.insertBefore(s,r),t&&(e.parentNode.removeChild(e),r.parentNode.removeChild(r)),e=s}}}return e}function g(e){var t=e;do{t=t.previousSibling}while(t&&S(t));return t}function m(e){var t=e;do{t=t.nextSibling}while(t&&S(t));return t}function y(e){if(1==e.nodeType){var t=b(e,u);if(t&&t.length>0&&"ignore"==t.trim().toLowerCase())return!0}return!1}function E(e){return"SPAN"==o.getTagOfNode(e)&&!e.firstChild}function b(e,t){var n=e.getAttribute("style");if(n&&n.length>0&&n.indexOf(t)>=0)for(var i=n.split(";"),r=0;r<i.length;r++){var o=i[r].split(":");if(2==o.length&&o[0].trim()==t)return o[1].trim()}return null}function S(e){if(!e)return!0;if(3==e.nodeType){var t=e.nodeValue;return 0==(t=t.replace(l,"")).trim().length}var n=o.getTagOfNode(e);return e.firstChild==e.lastChild&&("SPAN"==n||"FONT"==n)&&S(e.firstChild)}function C(e){for(var t=0;t<e.currentListIdsByLevels.length;t++){var n=e.currentListIdsByLevels[t];n&&(n.currentUniqueListId=-1)}}t.processNodesDiscovery=function(e){for(var t,n=e.wordConverterArgs;n.currentIndex<n.nodes.length;){var r=n.nodes.item(n.currentIndex),o=d(r);if(o){var a=n.currentListIdsByLevels[o.level-1]||i.createLevelLists();n.currentListIdsByLevels[o.level-1]=a,n.lastProcessedItem&&g(r)!=n.lastProcessedItem&&C(n);var u=a.listsMetadata[o.wordListId];if(u){if(!u.ignore&&1==u.numberOfItems){var l=h(r,s);u.tagName=u.firstFakeBullet==l?"UL":"OL"}}else{var c=h(r,s);u={numberOfItems:0,uniqueListId:e.nextUniqueId++,firstFakeBullet:c,ignore:!c||0==c.length,tagName:(t=c,p(t)?"UL":"OL")},a.listsMetadata[o.wordListId]=u,n.lists[u.uniqueListId.toString()]=u}o.uniqueListId=u.uniqueListId,u.ignore||"OL"==u.tagName&&u.numberOfItems>0&&a.currentUniqueListId!=o.uniqueListId?(u.ignore=!0,n.currentListIdsByLevels[0].currentUniqueListId=-1,n.currentListIdsByLevels=n.currentListIdsByLevels.slice(0,1)):(n.currentListIdsByLevels.length>o.level&&(n.currentListIdsByLevels=n.currentListIdsByLevels.slice(0,o.level)),a.currentUniqueListId=o.uniqueListId,n.listItems.push(o),u.numberOfItems++),n.lastProcessedItem=r}else{var f=n.lastProcessedItem;if(f&&g(r)==f&&r.tagName==f.tagName&&r.className==f.className){for(f.appendChild(f.ownerDocument.createElement("br")),f.appendChild(f.ownerDocument.createElement("br"));null!=r.firstChild;)f.appendChild(r.firstChild);r.parentNode.removeChild(r)}}n.currentIndex++}return n.listItems.length>0},t.processNodeConvert=function(e){var t=e.wordConverterArgs;for(t.currentIndex=0;t.currentIndex<t.listItems.length;){var n=t.listItems[t.currentIndex],i=n.originalNode,r=t.lists[n.uniqueListId.toString()];if(!r.ignore){var o=c(e,i,n,r);if(o){f(i,s);for(var a=i.ownerDocument.createElement("LI");i.firstChild;)a.appendChild(i.firstChild);o.appendChild(a),i.parentNode.removeChild(i),"UL"==r.tagName?e.numBulletsConverted++:e.numNumberedConverted++}}t.currentIndex++}return e.numBulletsConverted>0||e.numNumberedConverted>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r="&#8203;";t.default=function(e){var t=(e=(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/^ /gm,"&nbsp;").replace(/\r/g,"")).split("\n");if(2==t.length)e="<span>"+t[0]+"<br></span><span>"+t[1]+"</span>";else if(t.length>2){e="";var n=i.Browser.isIEOrEdge?r:"<br>";t.forEach(function(i,r){0==r?e+="<span>"+i+"<br></span>":r==t.length-1?e+="<span>"+i+"</span>":e+="<div>"+i+n+"</div>"})}return e=e.replace(/\s\s/g," &nbsp;")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=new RegExp("<span[^>]*id=['\"]?_rooster_watermarkSpan['\"]?[^>]*>[^<]*</span>","ig"),o=function(){function e(e,t){var n=this;this.watermark=e,this.format=t,this.handleWatermark=function(){n.showHideWatermark(!1)},this.format=this.format||{fontSize:"14px",textColor:"#aaa"}}return e.prototype.getName=function(){return"Watermark"},e.prototype.initialize=function(e){this.editor=e,this.showHideWatermark(!1),this.disposer=this.editor.addDomEventHandler({focus:this.handleWatermark,blur:this.handleWatermark})},e.prototype.dispose=function(){this.disposer(),this.disposer=null,this.hideWatermark(),this.editor=null},e.prototype.onPluginEvent=function(e){6==e.eventType?this.showHideWatermark("SetContent"==e.source):7==e.eventType&&this.isWatermarkShowing&&this.removeWartermarkFromHtml(e)},e.prototype.showHideWatermark=function(e){this.editor.hasFocus()&&(e||this.isWatermarkShowing)?(this.hideWatermark(),this.editor.focus()):this.editor.hasFocus()||!e&&this.isWatermarkShowing||!this.editor.isEmpty(!0)||this.showWatermark()},e.prototype.showWatermark=function(){var e=this.editor.getDocument(),t=i.wrap(e.createTextNode(this.watermark),'<span id="_rooster_watermarkSpan"></span>');i.applyFormat(t,this.format),this.editor.insertNode(t,{position:0,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),this.isWatermarkShowing=!0},e.prototype.hideWatermark=function(){var e=this;this.editor.queryElements('span[id="_rooster_watermarkSpan"]',function(t){return e.editor.deleteNode(t)}),this.isWatermarkShowing=!1},e.prototype.removeWartermarkFromHtml=function(e){var t=e.content;t=t.replace(r,""),e.content=t},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(){var e=this;this.pageX=-1,this.onMouseOver=function(t){var n=t.srcElement||t.target;e.pageX<0&&n&&("TD"==n.tagName||"TH"==n.tagName)&&n!=e.td&&(e.td=n,e.calcAndShowHandle())},this.onMouseDown=function(t){e.editor&&!e.editor.isDisposed()&&(e.pageX=t.pageX,e.initialPageX=t.pageX,e.attachMouseEvents(),e.getResizeHandle().style.borderWidth="0 1px",e.cancelEvent(t))},this.onMouseMove=function(t){e.adjustHandle(t.pageX),e.cancelEvent(t)},this.onMouseUp=function(t){e.detachMouseEvents(),e.getResizeHandle().style.borderWidth="0";var n=e.editor.getElementAtCursor("TABLE",e.td),i=parseInt(n.cellPadding);if(i=isNaN(i)?0:i,t.pageX!=e.initialPageX){var r=e.td.clientWidth-2*i+(t.pageX-e.initialPageX)*(e.isRtl(n)?-1:1);e.editor.addUndoSnapshot(function(t,n){e.setTableColumnWidth(r+"px"),e.editor.select(t,n)},"Format")}e.pageX=-1,e.calcAndShowHandle(),e.editor.focus(),e.cancelEvent(t)}}return e.prototype.initialize=function(e){this.editor=e,this.onMouseOverDisposer=this.editor.addDomEventHandler("mouseover",this.onMouseOver)},e.prototype.getName=function(){return"TableResize"},e.prototype.dispose=function(){this.detachMouseEvents(),this.editor=null,this.onMouseOverDisposer()},e.prototype.onPluginEvent=function(e){this.td&&(0==e.eventType||6==e.eventType||4==e.eventType&&!this.clickIntoCurrentTd(e))&&(this.td=null,this.calcAndShowHandle())},e.prototype.clickIntoCurrentTd=function(e){var t=e.rawEvent.target;return t instanceof Node&&i.contains(this.td,t,!0)},e.prototype.calcAndShowHandle=function(){if(this.td){var e=this.editor.getElementAtCursor("TR",this.td),t=this.editor.getElementAtCursor("TABLE",e);if(e&&t){var n=this.getPosition(t),i=n[0],r=n[1],o=this.getResizeHandle();i+=this.td.offsetLeft+(this.isRtl(t)?0:this.td.offsetWidth-6),o.style.display="",o.style.top=r+"px",o.style.height=t.offsetHeight+"px",o.style.left=i+"px"}}else this.getResizeHandle().style.display="none"},e.prototype.adjustHandle=function(e){var t=this.getResizeHandle();t.style.left=t.offsetLeft+e-this.pageX+"px",this.pageX=e},e.prototype.getPosition=function(e){var t=e.offsetParent,n=t?this.getPosition(t):[0,0],i=n[0],r=n[1];return[i+e.offsetLeft-e.scrollLeft,r+e.offsetTop-e.scrollTop]},e.prototype.getResizeHandle=function(){var e=this;return this.editor.getCustomData("TABLE_RESIZE_HANDLE",function(){var t=e.editor.getDocument(),n=i.fromHtml('<div style="position: fixed; cursor: col-resize; width: 6px; border: solid 0 #C6C6C6;"></div>',t)[0];return e.editor.insertNode(n,{position:3,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),n.addEventListener("mousedown",e.onMouseDown),n},function(t){t.removeEventListener("mousedown",e.onMouseDown),t.parentNode.removeChild(t)})},e.prototype.cancelEvent=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.attachMouseEvents=function(){if(this.editor&&!this.editor.isDisposed()){var e=this.editor.getDocument();e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mouseup",this.onMouseUp,!0)}},e.prototype.detachMouseEvents=function(){if(this.editor&&!this.editor.isDisposed()){var e=this.editor.getDocument();e.removeEventListener("mousemove",this.onMouseMove,!0),e.removeEventListener("mouseup",this.onMouseUp,!0)}},e.prototype.setTableColumnWidth=function(e){var t=this,n=new i.VTable(this.td);return n.table.style.width="",n.table.width="",n.forEachCellOfCurrentColumn(function(n){n.td&&(n.td.style.width=n.td==t.td?e:"")}),n.writeBack(),this.editor.contains(this.td)?this.td:n.getCurrentTd()},e.prototype.isRtl=function(e){return"rtl"==i.getComputedStyle(e,"direction")},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=function(e,t,n){return{sourceString:e,replacementHTML:t,matchSourceCaseSensitive:n}},o=[r(":)","ðŸ™‚",!0),r(";)","ðŸ˜‰",!0),r(":O","ðŸ˜²",!0),r(":o","ðŸ˜¯",!0),r("<3","â¤ï¸",!0)],s=function(){function e(e){void 0===e&&(e=o),this.updateReplacements(e)}return e.prototype.updateReplacements=function(e){var t;this.replacements=e,this.longestReplacementLength=(t=this.replacements,Math.max.apply(null,t.map(function(e){return e.sourceString.length}))),this.replacementEndCharacters=function(e){for(var t=new Set,n=0,i=e;n<i.length;n++){var r=i[n],o=r.sourceString;if(0!=o.length){var s=o[o.length-1];r.matchSourceCaseSensitive?t.add(s):(t.add(s.toLocaleLowerCase()),t.add(s.toLocaleUpperCase()))}}return t}(this.replacements)},e.prototype.getName=function(){return"CustomReplace"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){var t=this;if(!this.editor.isInIME()&&11==e.eventType&&((!e.rawEvent.data||this.replacementEndCharacters.has(e.rawEvent.data))&&null!=this.editor.getSelectionRange())){var n=i.cacheGetContentSearcher(e,this.editor),r=n.getSubStringBefore(this.longestReplacementLength),o=this.getMatchingReplacement(r);if(null!=o){var s=n.getSubStringBefore(o.sourceString.length),a=n.getRangeFromText(s,!0),u=document.createElement("span");u.innerHTML=o.replacementHTML;var l=1==u.childNodes.length?u.childNodes[0]:u;this.editor.performAutoComplete(function(){a.deleteContents(),a.insertNode(l),t.editor.select(l,-1)})}}},e.prototype.getMatchingReplacement=function(e){if(0==e.length)return null;for(var t=e.toLocaleLowerCase(),n=0,i=this.replacements;n<i.length;n++){var r=i[n],o=r.matchSourceCaseSensitive?[e,r.sourceString]:[t,r.sourceString.toLocaleLowerCase()],s=o[0],a=o[1];if(s.substring(s.length-a.length)==a)return r}return null},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(140);t.ImageResize=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r="RoosterJsImageResizingBegin",o="RoosterJsImageResizingEnd",s=new RegExp("\x3c!--"+r+"--\x3e[\\s\\S]*(<img\\s[^>]+>)[\\s\\S]*\x3c!--"+o+"--\x3e","gim"),a=function(){function e(e,t,n,i,s){void 0===e&&(e=10),void 0===t&&(t=10),void 0===n&&(n="#DB626C"),void 0===i&&(i=!1),void 0===s&&(s="img");var a=this;this.minWidth=e,this.minHeight=t,this.selectionBorderColor=n,this.forcePreserveRatio=i,this.resizableImageSelector=s,this.startResize=function(e){var t=a.getSelectedImage();if(a.editor&&t){a.startPageX=e.pageX,a.startPageY=e.pageY,a.startWidth=t.clientWidth,a.startHeight=t.clientHeight,a.editor.addUndoSnapshot();var n=a.editor.getDocument();n.addEventListener("mousemove",a.doResize,!0),n.addEventListener("mouseup",a.finishResize,!0),a.direction=(e.srcElement||e.target).style.cursor}a.stopEvent(e)},this.doResize=function(e){var t=a.getSelectedImage();if(a.editor&&t){var n=e.pageX-a.startPageX,i=e.pageY-a.startPageY,r=Math.max(a.startWidth+(a.isWest(a.direction)?-n:n),a.minWidth),o=Math.max(a.startHeight+(a.isNorth(a.direction)?-i:i),a.minHeight);if(a.forcePreserveRatio||e.shiftKey){var s=a.startWidth>0&&a.startHeight>0?1*a.startWidth/a.startHeight:0;s>0&&(r<o*s?r=o*s:o=r/s)}t.style.width=r+"px",t.style.height=o+"px"}a.stopEvent(e)},this.finishResize=function(e){var t=a.getSelectedImage();if(a.editor&&t){var n=a.editor.getDocument();n.removeEventListener("mousemove",a.doResize,!0),n.removeEventListener("mouseup",a.finishResize,!0);var i=t.clientWidth,r=t.clientHeight;t.style.width=i+"px",t.style.height=r+"px",t.width=i,t.height=r,a.resizeDiv.style.width="",a.resizeDiv.style.height=""}a.direction=null,a.editor.addUndoSnapshot(),a.editor.triggerContentChangedEvent("ImageResize"),a.stopEvent(e)},this.stopEvent=function(e){e.stopPropagation(),e.preventDefault()},this.removeResizeDivIfAny=function(e){var t=e&&e.parentNode,n=t&&t.previousSibling,i=t&&t.nextSibling;n&&8==n.nodeType&&n.nodeValue==r&&i&&8==i.nodeType&&i.nodeValue==o&&(t.parentNode.insertBefore(e,t),a.removeResizeDiv(t))},this.onBlur=function(e){a.hideResizeHandle()},this.onDragStart=function(e){(e.srcElement||e.target)==a.getSelectedImage()&&a.hideResizeHandle(!0)}}return e.prototype.getName=function(){return"ImageResize"},e.prototype.initialize=function(e){this.editor=e,this.disposer=e.addDomEventHandler({dragstart:this.onDragStart,blur:this.onBlur})},e.prototype.dispose=function(){this.resizeDiv&&this.hideResizeHandle(),this.disposer(),this.disposer=null,this.editor=null},e.prototype.onPluginEvent=function(e){var t=this;if(4==e.eventType){var n=e.rawEvent,r=n.srcElement||n.target;if("IMG"==i.getTagOfNode(r)){var o=r.parentNode;if((o?[].slice.call(o.querySelectorAll(this.resizableImageSelector)):[]).indexOf(r)<0)return;r.contentEditable="false";var s=this.getSelectedImage();s&&s!=r&&this.hideResizeHandle(),this.resizeDiv||this.showResizeHandle(r)}else this.resizeDiv&&!i.contains(this.resizeDiv,r)&&this.hideResizeHandle()}else if(0==e.eventType&&this.resizeDiv){var a=e.rawEvent;46==a.which||8==a.which?(this.editor.addUndoSnapshot(function(){t.removeResizeDiv(t.resizeDiv)}),this.resizeDiv=null,a.preventDefault(),this.resizeDiv=null):16!=a.which&&17!=a.which&&18!=a.which&&this.hideResizeHandle(!0)}else if(6==e.eventType&&"ImageResize"!=e.source)this.editor.queryElements("img",this.removeResizeDivIfAny),this.resizeDiv=null;else if(7==e.eventType){var u=e;u.content=this.extractHtml(u.content)}},e.prototype.showResizeHandle=function(e){this.resizeDiv=this.createResizeDiv(e),e.contentEditable="false",this.editor.select(this.resizeDiv,-3)},e.prototype.hideResizeHandle=function(e){var t=this.getSelectedImage(),n=this.resizeDiv&&this.resizeDiv.parentNode;if(n){if(t){t.removeAttribute("contentEditable");var i=this.resizeDiv.previousSibling&&8==this.resizeDiv.previousSibling.nodeType?this.resizeDiv.previousSibling:this.resizeDiv;n.insertBefore(t,i),e?this.editor.select(t):this.editor.select(t,-3)}this.removeResizeDiv(this.resizeDiv),this.resizeDiv=null}},e.prototype.createResizeDiv=function(e){var t=this,n=this.editor.getDocument(),i=n.createElement("DIV"),s=e.parentNode;s.insertBefore(i,e),s.insertBefore(n.createComment(r),i),s.insertBefore(n.createComment(o),i.nextSibling),i.style.position="relative",i.style.display="inline-flex",i.contentEditable="false",i.addEventListener("click",this.stopEvent),i.appendChild(e),["nw","ne","sw","se"].forEach(function(e){var r=n.createElement("DIV");i.appendChild(r),r.style.position="absolute",r.style.width="7px",r.style.height="7px",r.style.backgroundColor=t.selectionBorderColor,r.style.cursor=e+"-resize",t.isNorth(e)?r.style.top="-3px":r.style.bottom="-3px",t.isWest(e)?r.style.left="-3px":r.style.right="-3px",r.addEventListener("mousedown",t.startResize)});var a=n.createElement("DIV");return i.appendChild(a),a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.right="0",a.style.bottom="0",a.style.border="solid 1px "+this.selectionBorderColor,a.style.pointerEvents="none",i},e.prototype.removeResizeDiv=function(e){var t=this;this.editor&&this.editor.contains(e)&&([e.previousSibling,e.nextSibling].forEach(function(e){e&&8==e.nodeType&&t.editor.deleteNode(e)}),this.editor.deleteNode(e))},e.prototype.extractHtml=function(e){return e.replace(s,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1].replace(/(\s*contenteditable="false"(\/?>)|contenteditable="false"\s*)/im,"$2")})},e.prototype.getSelectedImage=function(){return this.resizeDiv?this.resizeDiv.getElementsByTagName("IMG")[0]:null},e.prototype.isNorth=function(e){return e&&"n"==e.substr(0,1)},e.prototype.isWest=function(e){return e&&"w"==e.substr(1,1)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(142);t.PickerPlugin=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6),s=i.Browser.isIE?"Esc":"Escape",a=i.Browser.isIE?"Left":"ArrowLeft",u=i.Browser.isIE?"Up":"ArrowUp",l=i.Browser.isIE?"Right":"ArrowRight",c=i.Browser.isIE?"Down":"ArrowDown",f=i.Browser.isIE?"Del":"Delete",d=function(){function e(e,t){this.dataProvider=e,this.pickerOptions=t}return e.prototype.getName=function(){return"Picker"},e.prototype.initialize=function(e){var t=this;this.editor=e,this.dataProvider.onInitalize(function(e){t.editor.focus();var n=t.getWord(null);n&&0!=n.length||!t.lastKnownRange||(t.editor.select(t.lastKnownRange),n=t.getWord(null));var i=function(){n?o.replaceWithNode(t.editor,n,e,!0):t.editor.insertNode(e),t.setIsSuggesting(!1)};t.pickerOptions.handleAutoComplete?t.editor.performAutoComplete(i,t.pickerOptions.changeSource):t.editor.addUndoSnapshot(i,t.pickerOptions.changeSource)},function(e){t.setIsSuggesting(e)},e)},e.prototype.dispose=function(){this.editor=null,this.dataProvider.onDispose()},e.prototype.willHandleEventExclusively=function(e){return this.isSuggesting&&(0==e.eventType||2==e.eventType||11==e.eventType)},e.prototype.onPluginEvent=function(e){if(6==e.eventType&&"SetContent"==e.source&&this.dataProvider.onContentChanged){var t=[];this.editor.queryElements("[id^='"+this.pickerOptions.elementIdPrefix+"']",function(e){e.id&&t.push(e.id)}),this.dataProvider.onContentChanged(t)}0==e.eventType&&(this.eventHandledOnKeyDown=!1,this.onKeyDownEvent(e)),2!=e.eventType||this.eventHandledOnKeyDown?1==e.eventType?this.isCharacterValue=!0:5==e.eventType&&this.isSuggesting&&this.setIsSuggesting(!1):this.onKeyUpDomEvent(e)},e.prototype.setLastKnownRange=function(e){this.lastKnownRange=e},e.prototype.setIsSuggesting=function(e){this.isSuggesting=e,e||this.setLastKnownRange(null),this.dataProvider.onIsSuggestingChanged(e)},e.prototype.handleKeyDownEvent=function(e){this.eventHandledOnKeyDown=!0,e.rawEvent.preventDefault(),e.rawEvent.stopImmediatePropagation()},e.prototype.getIdValue=function(e){var t=e;return t.attributes&&t.attributes.getNamedItem("id")?t.attributes.getNamedItem("id").value:null},e.prototype.getWordBeforeCursor=function(e){var t=r.cacheGetContentSearcher(e,this.editor);return t?t.getWordBefore():null},e.prototype.replaceNode=function(e,t){e&&this.editor.deleteNode(e),t&&this.editor.insertNode(t)},e.prototype.getRangeUntilAt=function(e){var t,n,o=this;return r.cacheGetContentSearcher(e,this.editor).forEachTextInlineElement(function(e){for(var i=!1,r=e.getTextContent(),s=r?r.length:-1;s>=0;){if(r[s]==o.pickerOptions.triggerCharacter){t=e.getStartPosition().move(s),i=!0;break}s--}return i&&(n=e.getEndPosition()),i}),i.createRange(t,n)||this.editor.getDocument().createRange()},e.prototype.onKeyUpDomEvent=function(e){if(this.isSuggesting){var t=(n=this.getWord(e)).substring(1).trim();n==this.pickerOptions.triggerCharacter||t&&t.length>0&&t.split(" ").length<=4?(this.dataProvider.queryStringUpdated(t),this.setLastKnownRange(this.editor.getSelectionRange())):this.setIsSuggesting(!1)}else if(this.isCharacterValue){var n=this.getWordBeforeCursor(e);if(this.blockSuggestions)null!=n&&n[0]!=this.pickerOptions.triggerCharacter&&(this.blockSuggestions=!1);else if(null!=n&&n.split(" ").length<=4&&n[0]==this.pickerOptions.triggerCharacter){this.setIsSuggesting(!0);var i=n.substring(1).trim();if(this.dataProvider.queryStringUpdated(i),this.setLastKnownRange(this.editor.getSelectionRange()),this.dataProvider.setCursorPoint){var o=r.cacheGetContentSearcher(e,this.editor),s=this.editor.getDocument().createRange(),a=o.getInlineElementBefore().getContainerNode();if(!this.setRangeStart(s,a,n)){var u=a.previousSibling;this.setRangeStart(s,u,this.pickerOptions.triggerCharacter)}var l=s.getBoundingClientRect();if(0==l.left&&0==l.bottom&&0==l.top&&(l=s.getClientRects()[0]),l){s.detach();var c={x:l.left,y:(l.bottom+l.top)/2},f=(l.bottom-l.top)/2;this.dataProvider.setCursorPoint(c,f)}}}}this.isCharacterValue=!1},e.prototype.onKeyDownEvent=function(e){var t=e.rawEvent;if(this.isSuggesting)t.key==s?(this.setIsSuggesting(!1),this.blockSuggestions=!0,this.handleKeyDownEvent(e)):this.dataProvider.shiftHighlight&&(this.pickerOptions.isHorizontal?t.key==a||t.key==l:t.key==u||t.key==c)?(this.dataProvider.shiftHighlight(this.pickerOptions.isHorizontal?t.key==l:t.key==c),this.handleKeyDownEvent(e)):!this.dataProvider.selectOption||"Enter"!=t.key&&"Tab"!=t.key||(this.dataProvider.selectOption(),this.handleKeyDownEvent(e));else if("Backspace"==t.key){var n=(d=r.cacheGetContentSearcher(e,this.editor)).getInlineElementBefore()?d.getInlineElementBefore().getContainerNode():null;if((p=n?this.getIdValue(n):null)&&0==p.indexOf(this.pickerOptions.elementIdPrefix)&&(null==d.getInlineElementAfter()||!(d.getInlineElementAfter()instanceof i.PartialInlineElement))){var o=this.dataProvider.onRemove(n,!0);this.replaceNode(n,o),this.editor.select(o,-3),this.handleKeyDownEvent(e)}}else if(t.key==f){var d,p,h=(d=r.cacheGetContentSearcher(e,this.editor)).getInlineElementAfter()?d.getInlineElementAfter().getContainerNode():null;if((p=h?this.getIdValue(h):null)&&0==p.indexOf(this.pickerOptions.elementIdPrefix)){o=this.dataProvider.onRemove(h,!1);this.replaceNode(h,o),this.handleKeyDownEvent(e)}}},e.prototype.getWord=function(e){var t=this.getRangeUntilAt(e).toString(),n=this.getWordBeforeCursor(e);return t==this.pickerOptions.triggerCharacter&&t!=n?n:t},e.prototype.setRangeStart=function(e,t,n){var i=t?t.textContent.lastIndexOf(n):-1;return i>-1&&(e.setStart(t,i),!0)},e}();t.default=d}])});
//# sourceMappingURL=rooster-amd-min.js.map